import{u as N,r as s,j as e}from"./index-BNvq7L73.js";import{s as w}from"./skuService-BaVM3Gme.js";import{f as x,a as v}from"./formatters-ptPrPoGe.js";import{A as y}from"./arrow-left-BgDROCgl.js";import{C as S}from"./chevron-down-7H3UhiUV.js";import{D as k}from"./download-B9r3QDrU.js";import{A as p}from"./alert-circle-CvwkvtqH.js";import{T as C}from"./tag-CdwK48xO.js";import"./api-BJ7xcL-N.js";import"./cachedApi-DyAQX7TM.js";const P=()=>{const m=N(),[h,n]=s.useState(!1),[o,i]=s.useState([]),[a,u]=s.useState(3),[r,g]=s.useState(5),[l,f]=s.useState("");s.useEffect(()=>{b()},[a,r]);const b=async()=>{try{n(!0);const t=await w.getSlowMoving({period:a,threshold:r});i(t.data||[])}catch(t){console.error("Error loading slow moving SKUs:",t),i([])}finally{n(!1)}},c=o.filter(t=>{var d;if(!l.trim())return!0;const j=l.trim().toLowerCase();return((d=t.hsnSacCode)==null?void 0:d.toLowerCase().includes(j))||!1});return e.jsxs("div",{className:"p-8 space-y-10 w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m("/app/sku"),className:"text-slate-600 hover:text-indigo-600 transition-colors",children:e.jsx(y,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Slow Moving SKUs"})]}),e.jsx("p",{className:"text-lg text-slate-500 font-medium",children:"Identify SKUs with low sales velocity over specified periods."})]})}),e.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("label",{className:"block text-[13px] font-black text-slate-700 uppercase tracking-wider mb-2",children:"Time Period"}),e.jsxs("select",{value:a,onChange:t=>u(parseInt(t.target.value)),className:"appearance-none bg-white border border-slate-200 text-[13px] font-bold uppercase tracking-wider text-slate-700 px-5 py-3 pr-12 rounded-[1.5rem] focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all cursor-pointer hover:bg-slate-50 w-full min-w-[200px]",children:[e.jsx("option",{value:3,children:"Last 3 Months"}),e.jsx("option",{value:6,children:"Last 6 Months"}),e.jsx("option",{value:0,children:"Custom"})]}),e.jsx(S,{size:18,className:"absolute right-4 bottom-[14px] text-slate-400 pointer-events-none group-focus-within:text-indigo-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[13px] font-black text-slate-700 uppercase tracking-wider mb-2",children:"Movement Threshold (Less than X units sold)"}),e.jsx("input",{type:"number",min:"1",value:r,onChange:t=>g(parseInt(t.target.value)||5),className:"bg-slate-50 border border-slate-200 text-[13px] font-bold uppercase tracking-wider text-slate-800 px-5 py-3 rounded-[1.5rem] focus:outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-500/10 transition-all w-32",placeholder:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[13px] font-black text-slate-700 uppercase tracking-wider mb-2",children:"Search by HSN Code"}),e.jsx("input",{type:"text",value:l,onChange:t=>f(t.target.value),placeholder:"Enter HSN/SAC Code",className:"bg-slate-50 border border-slate-200 text-[13px] font-bold uppercase tracking-wider text-slate-800 px-5 py-3 rounded-[1.5rem] focus:outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-500/10 transition-all w-48"})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white text-[13px] font-black uppercase tracking-wider px-6 py-3 rounded-[1.5rem] flex items-center gap-2 transition-all shadow-sm hover:shadow-md",children:[e.jsx(k,{className:"w-5 h-5"}),"Export"]})]})}),e.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/70 border-b border-slate-100",children:[e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"SKU ID"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Item Name"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Category"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"HSN/SAC Code"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Current Stock"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Units Sold in Period"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Last Sale Date"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Days Since Last Sale"}),e.jsx("th",{className:"px-10 py-7 text-[13px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-10 py-12 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})})})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-10 py-12 text-center text-slate-500 text-sm font-medium",children:o.length===0?"No slow moving SKUs found":"No SKUs match the HSN Code search"})}):c.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-10 py-5 text-sm font-bold text-slate-900",children:t.skuId}),e.jsx("td",{className:"px-10 py-5 text-sm text-slate-800",children:t.itemName}),e.jsx("td",{className:"px-10 py-5 text-sm text-slate-600",children:t.category}),e.jsx("td",{className:"px-10 py-5 text-sm text-slate-600",children:t.hsnSacCode||"â€”"}),e.jsx("td",{className:"px-10 py-5 text-sm text-slate-900 font-bold",children:x(t.currentStock)}),e.jsx("td",{className:"px-10 py-5 text-sm text-amber-600 font-bold",children:x(t.unitsSold)}),e.jsx("td",{className:"px-10 py-5 text-sm text-slate-600",children:v(t.lastSaleDate)}),e.jsx("td",{className:"px-10 py-5 text-sm text-slate-600",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-amber-500"}),t.daysSinceLastSale," days"]})}),e.jsx("td",{className:"px-10 py-5 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"px-4 py-2 text-xs font-bold uppercase tracking-wider bg-amber-50 text-amber-700 rounded-xl hover:bg-amber-100 transition-all flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Mark for Review"]}),e.jsxs("button",{className:"px-4 py-2 text-xs font-bold uppercase tracking-wider bg-indigo-50 text-indigo-700 rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Apply Discount"]})]})})]},t.skuId))})]})})})]})};export{P as default};
