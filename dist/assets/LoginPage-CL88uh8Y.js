import{u as L,b as F,r as d,j as e}from"./index-v4UyLoar.js";import{a as M}from"./api-VNhYhLPD.js";import{B as N}from"./building-2-D7A4OgTx.js";import{M as P}from"./mail-DMU1EzeJ.js";import{L as D}from"./lock-ebOEqwAx.js";import{E as R}from"./eye-off-CnmMKxAE.js";import{E as U}from"./eye-TdPdDtr5.js";import{A as $}from"./arrow-right-DOZgryuS.js";const Y=()=>{const g=L(),f=F(),[t,I]=d.useState({companyId:"",email:"",password:"",rememberMe:!1}),[r,l]=d.useState({}),[b,y]=d.useState(!1),[h,S]=d.useState(!1),[j,v]=d.useState("");d.useEffect(()=>{var a;if((a=f.state)!=null&&a.message){v(f.state.message);const o=setTimeout(()=>v(""),5e3);return()=>clearTimeout(o)}},[f.state]);const c=a=>{const{name:o,value:u,type:p,checked:x}=a.target;I(n=>({...n,[o]:p==="checkbox"?x:u})),r[o]&&l(n=>({...n,[o]:""}))},k=()=>{const a={};return t.companyId.trim()?t.companyId.length!==6&&(a.companyId="Company ID must be 6 characters"):a.companyId="Company ID is required",t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(a.email="Invalid email format"):a.email="Email is required",t.password||(a.password="Password is required"),l(a),Object.keys(a).length===0},C=async a=>{var o,u,p,x,n,w;if(a.preventDefault(),!!k()){y(!0);try{const s=await M.post("/auth/login",{companyId:t.companyId.toUpperCase(),email:t.email.toLowerCase(),password:t.password});if(s.data.success){t.rememberMe?(sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("access"),localStorage.setItem("token",s.data.data.token),localStorage.setItem("user",JSON.stringify(s.data.data.user)),localStorage.removeItem("access")):(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("access"),sessionStorage.setItem("token",s.data.data.token),sessionStorage.setItem("user",JSON.stringify(s.data.data.user)),sessionStorage.removeItem("access"));const i=s.data.data.user.role;g(i==="user"||i==="sales"?"/app/sku":"/app/dashboard")}}catch(s){if(console.error("Login error:",s),console.error("Error details:",{message:s.message,response:(o=s.response)==null?void 0:o.data,status:(u=s.response)==null?void 0:u.status,requestUrl:(p=s.config)==null?void 0:p.url,baseURL:(x=s.config)==null?void 0:x.baseURL,fullURL:((n=s.config)==null?void 0:n.baseURL)+((w=s.config)==null?void 0:w.url)}),s.response){const i=s.response.status,m=s.response.data,E=(m==null?void 0:m.error)||(m==null?void 0:m.message)||"Login failed. Please try again.";l(i===401?{submit:"Invalid credentials. Please check your Company ID, email, and password."}:i===404?{submit:"Login endpoint not found. Please check if the backend server is running."}:{submit:`Error ${i}: ${E}`})}else s.request?l({submit:"Unable to connect to server. Please check if the backend server is running."}):l({submit:"An unexpected error occurred. Please try again."})}finally{y(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",style:{transform:"scale(0.8)",transformOrigin:"top left",width:"125%",height:"125%"},children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-float"}),e.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-float",style:{animationDelay:"2s"}})]}),e.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[e.jsxs("div",{className:"text-center animate-fade-in-up",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(N,{className:"w-8 h-8 text-white"})})}),e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your account to continue"})]}),j&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg animate-fade-in-up",children:j}),e.jsxs("form",{onSubmit:C,className:"bg-white rounded-2xl shadow-2xl p-8 space-y-6 animate-fade-in-up animate-delay-300",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"companyId",className:"block text-sm font-medium text-gray-700 mb-2",children:["Company ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"companyId",name:"companyId",value:t.companyId,onChange:c,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all uppercase ${r.companyId?"border-red-500":"border-gray-300"}`,placeholder:"ABCDEF",maxLength:6})]}),r.companyId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.companyId})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:c,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${r.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@company.com"})]}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:h?"text":"password",id:"password",name:"password",value:t.password,onChange:c,className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${r.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>S(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?e.jsx(R,{className:"w-5 h-5"}):e.jsx(U,{className:"w-5 h-5"})})]}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:t.rememberMe,onChange:c,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),alert("Forgot password feature coming soon!")},className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Forgot password?"})})]}),r.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:r.submit}),e.jsx("button",{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-blue-600 via-blue-700 to-blue-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:shadow-2xl transition-all transform hover:scale-[1.02] shadow-lg hover-glow flex items-center justify-center gap-2 animate-gradient relative overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Sign In"}),e.jsx($,{className:"w-5 h-5"})]})}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),g("/register")},className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Register Your Company"})]})})]})]})]})};export{Y as default};
