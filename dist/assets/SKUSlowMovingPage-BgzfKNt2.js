import{u as b,r as s,j as e}from"./index-v4UyLoar.js";import{s as N}from"./skuService-CD47JNeC.js";import{f as i,a as v}from"./formatters-ptPrPoGe.js";import{A as w}from"./arrow-left-CQGXFyIF.js";import{D as S}from"./download-WG4FeSf0.js";import{A as m}from"./alert-circle-DtAct9_U.js";import{T as C}from"./tag-D1SIBEly.js";import"./api-VNhYhLPD.js";import"./cachedApi-CKq13PPM.js";const T=()=>{const p=b(),[h,o]=s.useState(!1),[n,c]=s.useState([]),[a,g]=s.useState(3),[r,u]=s.useState(5),[l,y]=s.useState("");s.useEffect(()=>{f()},[a,r]);const f=async()=>{try{o(!0);const t=await N.getSlowMoving({period:a,threshold:r});c(t.data||[])}catch(t){console.error("Error loading slow moving SKUs:",t),c([])}finally{o(!1)}},x=n.filter(t=>{var d;if(!l.trim())return!0;const j=l.trim().toLowerCase();return((d=t.hsnSacCode)==null?void 0:d.toLowerCase().includes(j))||!1});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>p("/app/sku"),className:"text-gray-600 hover:text-gray-900",children:e.jsx(w,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Slow Moving SKUs"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Period"}),e.jsxs("select",{value:a,onChange:t=>g(parseInt(t.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:3,children:"Last 3 Months"}),e.jsx("option",{value:6,children:"Last 6 Months"}),e.jsx("option",{value:0,children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Movement Threshold (Less than X units sold)"}),e.jsx("input",{type:"number",min:"1",value:r,onChange:t=>u(parseInt(t.target.value)||5),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 w-32",placeholder:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by HSN Code"}),e.jsx("input",{type:"text",value:l,onChange:t=>y(t.target.value),placeholder:"Enter HSN/SAC Code",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 w-48"})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Export"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SKU ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"HSN/SAC Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Current Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Units Sold in Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Last Sale Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Days Since Last Sale"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:n.length===0?"No slow moving SKUs found":"No SKUs match the HSN Code search"})}):x.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:t.skuId}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.itemName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.hsnSacCode||"â€”"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:i(t.currentStock)}),e.jsx("td",{className:"px-4 py-3 text-sm text-orange-600 font-semibold",children:i(t.unitsSold)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:v(t.lastSaleDate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-4 h-4 text-orange-500"}),t.daysSinceLastSale," days"]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 flex items-center gap-1",children:[e.jsx(m,{className:"w-4 h-4"}),"Mark for Review"]}),e.jsxs("button",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded hover:bg-blue-200 flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),"Apply Discount"]})]})})]},t.skuId))})]})})})]})};export{T as default};
