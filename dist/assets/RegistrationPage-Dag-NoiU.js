import{u as M,r as u,j as e,F as Z,U as k}from"./index-BNvq7L73.js";import{a as B}from"./api-BJ7xcL-N.js";import{A as T}from"./arrow-left-BgDROCgl.js";import{B as g}from"./building-2-zDs6-mdQ.js";import{M as x}from"./map-pin-hoCZyjFd.js";import{P as F}from"./phone-12AiMD9I.js";import{G}from"./globe-BrBwYQhH.js";import{M as z}from"./mail-GAFf_lEu.js";import{L}from"./lock-C0-IBKT9.js";const X=()=>{const y=M(),[s,h]=u.useState({companyName:"",gstNumber:"",businessType:"",address:"",city:"",state:"",pin:"",phone:"",website:"",fullName:"",email:"",adminPhone:"",password:"",confirmPassword:""}),[a,b]=u.useState({}),[N,j]=u.useState(!1),[c,S]=u.useState(!1),i=r=>{const{name:n,value:d}=r.target;let o=d;(n==="city"||n==="state")&&(o=d.replace(/[0-9]/g,""),o.length>50&&(o=o.substring(0,50))),n==="pin"&&(o=d.replace(/[^0-9]/g,"")),(n==="companyName"||n==="website")&&o.length>50&&(o=o.substring(0,50)),h(p=>({...p,[n]:o,...n==="phone"&&c?{adminPhone:o}:{}})),a[n]&&b(p=>({...p,[n]:void 0}))};u.useEffect(()=>{c&&(h(r=>({...r,adminPhone:r.phone})),a.adminPhone&&b(r=>({...r,adminPhone:void 0})))},[c,s.phone]);const A=r=>{const n=r.target.checked;S(n),n&&h(d=>({...d,adminPhone:d.phone}))},E=()=>{const r={};return s.companyName.trim()||(r.companyName="Company Name is required"),s.gstNumber.trim()?/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(s.gstNumber)||(r.gstNumber="Invalid GST Number format"):r.gstNumber="GST Number is required",s.businessType||(r.businessType="Business Type is required"),s.address.trim()||(r.address="Address is required"),s.city.trim()||(r.city="City is required"),s.state.trim()||(r.state="State is required"),s.pin.trim()?/^[0-9]{6}$/.test(s.pin)||(r.pin="PIN Code must be 6 digits"):r.pin="PIN Code is required",s.phone.trim()?/^[0-9]{10}$/.test(s.phone.replace(/[\s-]/g,""))||(r.phone="Invalid phone number"):r.phone="Phone is required",s.website&&!/^https?:\/\/.+/.test(s.website)&&(r.website="Website must start with http:// or https://"),s.fullName.trim()||(r.fullName="Full Name is required"),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(r.email="Invalid email format"):r.email="Email is required",s.adminPhone.trim()?/^[0-9]{10}$/.test(s.adminPhone.replace(/[\s-]/g,""))||(r.adminPhone="Invalid phone number"):r.adminPhone="Phone is required",s.password?s.password.length<8&&(r.password="Password must be at least 8 characters"):r.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(r.confirmPassword="Passwords do not match"):r.confirmPassword="Please confirm your password",b(r),Object.keys(r).length===0},I=async r=>{var n,d,o,p,w,v,P,C;if(r.preventDefault(),!!E()){j(!0);try{const t={companyName:s.companyName,gstNumber:s.gstNumber.toUpperCase(),businessType:s.businessType,address:s.address,city:s.city,state:s.state,pin:s.pin,phone:s.phone,website:s.website||"",fullName:s.fullName,email:s.email,adminPhone:s.adminPhone,password:s.password},m=await B.post("/companies/register",t);if(m.data.success){const l=m.data.data.company.companyId;alert(`Company registered successfully!

Company ID: ${l}

Please save this ID for future reference.`),y("/login",{state:{message:`Company registered successfully! Your Company ID is: ${l}`,companyId:l}})}}catch(t){if(console.error("Registration error:",t),console.error("Error details:",{message:t.message,response:(n=t.response)==null?void 0:n.data,status:(d=t.response)==null?void 0:d.status,requestUrl:(o=t.config)==null?void 0:o.url,baseURL:(p=t.config)==null?void 0:p.baseURL,fullURL:((w=t.config)==null?void 0:w.baseURL)+((v=t.config)==null?void 0:v.url)}),t.response){const m=t.response.status,l=t.response.data,f=(l==null?void 0:l.error)||(l==null?void 0:l.message)||"Registration failed. Please try again.";if(m===404)alert(`404 Not Found: The registration endpoint was not found.

Request URL: ${(P=t.config)==null?void 0:P.baseURL}${(C=t.config)==null?void 0:C.url}

Please check if the backend server is running and the route is correct.`);else if(m===409)alert(`Registration Conflict (409)

${f}

Please check:
• GST Number - This GST number may already be registered
• Email Address - This email may already be in use

If you believe this is an error, please contact support.`);else if(m===400){const $=(l==null?void 0:l.errors)||(l==null?void 0:l.error);if(typeof $=="object"){const q=Object.entries($).map(([R,U])=>`• ${R}: ${U}`).join(`
`);alert(`Validation Error (400)

Please correct the following:

${q}`)}else alert(`Validation Error (400)

${f}`)}else alert(`Error ${m}: ${f}`)}else t.request?alert("Unable to connect to server. Please check if the backend server is running."):alert("An unexpected error occurred. Please try again.")}finally{j(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-float"}),e.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-float",style:{animationDelay:"2s"}})]}),e.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[e.jsxs("div",{className:"text-center mb-8 animate-fade-in-up",children:[e.jsxs("button",{onClick:()=>y("/"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-blue-600 mb-4 transition-colors magnetic",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]}),e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight mb-2",children:"Company Registration Form"}),e.jsx("p",{className:"text-lg text-slate-500 font-medium",children:"Create your account and start managing your inventory"})]}),e.jsxs("form",{onSubmit:I,className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-2xl p-10 space-y-10 animate-fade-in-up animate-delay-300",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Company Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"companyName",name:"companyName",value:s.companyName,onChange:i,maxLength:50,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.companyName?"border-red-500":"border-gray-300"}`,placeholder:"Enter company name"})]}),a.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.companyName})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"gstNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:["GST Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"gstNumber",name:"gstNumber",value:s.gstNumber,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all uppercase ${a.gstNumber?"border-red-500":"border-gray-300"}`,placeholder:"15AAACB1234D1Z5",maxLength:15})]}),a.gstNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.gstNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"businessType",className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 z-10"}),e.jsxs("select",{id:"businessType",name:"businessType",value:s.businessType,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all appearance-none bg-white ${a.businessType?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Business Type"}),e.jsx("option",{value:"Manufacturing",children:"Manufacturing"}),e.jsx("option",{value:"Trading",children:"Trading"})]})]}),a.businessType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.businessType})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"address",name:"address",value:s.address,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.address?"border-red-500":"border-gray-300"}`,placeholder:"Enter company address"})]}),a.address&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.address})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"city",name:"city",value:s.city,onChange:i,pattern:"[A-Za-z\\s\\-'\\.]+",maxLength:50,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city",title:"City should contain only letters, spaces, hyphens, and apostrophes (max 50 characters)"})]}),a.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.city})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-2",children:["State ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"state",name:"state",value:s.state,onChange:i,pattern:"[A-Za-z\\s\\-'\\.]+",maxLength:50,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.state?"border-red-500":"border-gray-300"}`,placeholder:"Enter state",title:"State should contain only letters, spaces, hyphens, and apostrophes (max 50 characters)"})]}),a.state&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.state})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"pin",className:"block text-sm font-medium text-gray-700 mb-2",children:["PIN Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"pin",name:"pin",value:s.pin,onChange:i,pattern:"[0-9]{6}",inputMode:"numeric",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.pin?"border-red-500":"border-gray-300"}`,placeholder:"123456",maxLength:6,title:"PIN code should contain exactly 6 digits"})]}),a.pin&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.pin})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.phone?"border-red-500":"border-gray-300"}`,placeholder:"9876543210",maxLength:10})]}),a.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"website",name:"website",value:s.website,onChange:i,maxLength:50,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.website?"border-red-500":"border-gray-300"}`,placeholder:"https://www.example.com",title:"Website URL (max 50 characters)"})]}),a.website&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.website})]})]})]}),e.jsxs("div",{className:"space-y-6 pt-8 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Super Admin Details"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:s.fullName,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.fullName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your full name"})]}),a.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.fullName})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@company.com"})]}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{htmlFor:"adminPhone",className:"block text-sm font-medium text-gray-700",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:A,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{children:"Same as company phone"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",id:"adminPhone",name:"adminPhone",value:s.adminPhone,onChange:i,disabled:c,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.adminPhone?"border-red-500":"border-gray-300"} ${c?"bg-gray-100 cursor-not-allowed":"bg-white"}`,placeholder:"9876543210",maxLength:10})]}),a.adminPhone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.adminPhone})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",id:"password",name:"password",value:s.password,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.password?"border-red-500":"border-gray-300"}`,placeholder:"Minimum 8 characters"})]}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:i,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${a.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Re-enter password"})]}),a.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword})]})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:N,className:"w-full bg-gradient-to-r from-blue-600 via-blue-700 to-blue-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:shadow-2xl transition-all transform hover:scale-[1.02] shadow-lg hover-glow flex items-center justify-center gap-2 animate-gradient relative overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Creating Account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Create Account"}),e.jsx(T,{className:"w-5 h-5 rotate-180"})]})})})]})]})]})};export{X as default};
