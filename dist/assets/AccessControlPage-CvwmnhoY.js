import{u as Oe,r as o,j as e}from"./index-BNvq7L73.js";import{c as he,a as F}from"./formatters-ptPrPoGe.js";import{b as Ve,v as H}from"./validators-CanHBN9q.js";import{a as P}from"./api-BJ7xcL-N.js";import{c as I}from"./cachedApi-DyAQX7TM.js";import{S as Be}from"./search-DCKMtPWa.js";import{U as Ke}from"./user-plus-qmox-up4.js";import{E as ye}from"./eye-yPZ_5C9M.js";import{M as We}from"./mail-GAFf_lEu.js";import{X as T}from"./x-DoRfBOx5.js";import{P as fe}from"./plus-i3erHhTd.js";import{P as Ge}from"./pen-square-kwXc_A6w.js";import{T as Xe}from"./trash-2-CJo7E_kE.js";import{C as Ye}from"./chevron-up-Bqe7zxKr.js";import{C as He}from"./chevron-down-7H3UhiUV.js";import{D as Je}from"./download-B9r3QDrU.js";const ps=()=>{const be=Oe(),[w,je]=o.useState("users"),[C,Ne]=o.useState("all"),[k,E]=o.useState(!1),[q,ve]=o.useState(""),[J,we]=o.useState(""),[Ce,z]=o.useState([]),[Q,Z]=o.useState([]),[ee,se]=o.useState([]),[te,ae]=o.useState([]),[_,ke]=o.useState(new Set),[O,$]=o.useState(!1),[Se,R]=o.useState(!1),[V,B]=o.useState(null),[a,p]=o.useState({email:"",firstName:"",lastName:"",employeeId:"",role:"",department:"",moduleAccess:{dashboard:{view:!0,create:!1,edit:!1,delete:!1},sku:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!1,edit:!1,delete:!1},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!0,create:!0,edit:!0,delete:!0},itemCategory:{view:!0,create:!0,edit:!0,delete:!0},subCategory:{view:!0,create:!0,edit:!0,delete:!0}},categoryAccess:[]}),[D,M]=o.useState({name:"",description:"",permissions:{}}),[re,Ae]=o.useState(""),[le,Ie]=o.useState(""),[de,Ee]=o.useState(""),[K,Re]=o.useState("all"),[W,De]=o.useState("all"),[ie,Me]=o.useState([]),[ce,G]=o.useState([]),[oe,X]=o.useState([]),[ne,Y]=o.useState([]),[n,S]=o.useState({});o.useEffect(()=>{U()},[w,C]);const U=async()=>{var s,t;try{switch(E(!0),w){case"users":if(C==="all"){const d=await I("/users",{params:{role:J}},{ttlMs:12e4});z(d.data||[])}else if(C==="pending"){const d=await I("/users/invitations",void 0,{ttlMs:6e4});Z(d.data||[])}else{const d=await I("/users",{params:{status:"suspended"}},{ttlMs:12e4});z(d.data||[])}break;case"roles":const r=await I("/roles",void 0,{ttlMs:10*60*1e3});se(r.data||[]);break;case"audit-logs":const c=await I("/access-control/audit-logs",{params:{dateFrom:re,dateTo:le,user:de,actionType:K!=="all"?K:void 0,module:W!=="all"?W:void 0}},{ttlMs:1*60*1e3});ae(c.data||[]);break}}catch(r){console.error("Error loading data:",r),(t=(s=r.response)==null?void 0:s.data)!=null&&t.error?console.error("API Error:",r.response.data.error):r.message&&console.error("Error message:",r.message),w==="users"?(z([]),Z([])):w==="roles"?se([]):w==="audit-logs"&&ae([])}finally{E(!1)}};o.useEffect(()=>{O&&I("/categories/product",void 0,{ttlMs:24*60*60*1e3}).then(s=>{Me(s.data||[])})},[O]);const Ue=async()=>{var r,c,d,b,h,x,g,l,y,f,u,j,i,N,A;const s={};if(Ve(a.email)||(s.email="Valid email is required"),H(a.firstName)||(s.firstName="First Name is required"),H(a.lastName)||(s.lastName="Last Name is required"),H(a.role)||(s.role="Role is required"),Object.values(a.moduleAccess).some(m=>m.view||m.create||m.edit||m.delete)||(s.moduleAccess="At least one permission must be selected in Module Access"),a.categoryAccess.length>0&&a.categoryAccess.forEach((m,v)=>{var me,ue,pe,ge;((me=m.permissions)==null?void 0:me.view)||((ue=m.permissions)==null?void 0:ue.create)||((pe=m.permissions)==null?void 0:pe.edit)||((ge=m.permissions)==null?void 0:ge.delete)||(s[`categoryAccess_${v}`]=`Category Access ${v+1}: At least one permission must be selected`)}),Object.keys(s).length>0){S(s);return}try{E(!0),await P.post("/users/invite",a),$(!1),p({email:"",firstName:"",lastName:"",employeeId:"",role:"",department:"",moduleAccess:{dashboard:{view:!0,create:!1,edit:!1,delete:!1},sku:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!1,edit:!1,delete:!1},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!0,create:!0,edit:!0,delete:!0},itemCategory:{view:!0,create:!0,edit:!0,delete:!0},subCategory:{view:!0,create:!0,edit:!0,delete:!0}},categoryAccess:[]}),U()}catch(m){if(console.error("Error inviting user:",m),((r=m.response)==null?void 0:r.status)===409){const v=((d=(c=m.response)==null?void 0:c.data)==null?void 0:d.error)||((h=(b=m.response)==null?void 0:b.data)==null?void 0:h.message)||"User with this email already exists";alert(`Invitation failed: ${v}

Please use a different email address or check if this user has already been invited.`)}else if(((x=m.response)==null?void 0:x.status)===400){const v=((l=(g=m.response)==null?void 0:g.data)==null?void 0:l.error)||((f=(y=m.response)==null?void 0:y.data)==null?void 0:f.message)||"Invalid data provided";alert(`Invitation failed: ${v}

Please check all required fields and try again.`)}else if(((u=m.response)==null?void 0:u.status)===500)alert("Server error: Failed to send invitation. Please try again later or contact support.");else{const v=((i=(j=m.response)==null?void 0:j.data)==null?void 0:i.error)||((A=(N=m.response)==null?void 0:N.data)==null?void 0:A.message)||m.message||"Failed to send invitation";alert(`Invitation failed: ${v}`)}}finally{E(!1)}},$e=()=>{p({...a,categoryAccess:[...a.categoryAccess,{productCategoryIds:[],itemCategoryIds:[],subCategoryIds:[],itemIds:[],permissions:{view:!0,create:!1,edit:!1,delete:!1}}]})},Le=async s=>{if(!s||s.length===0){G([]);return}try{const t=[];for(const c of s){const d=await I("/categories/item",{params:{productCategoryId:c}},{ttlMs:864e5});t.push(...d.data||[])}const r=t.filter((c,d,b)=>d===b.findIndex(h=>h.id===c.id));G(r)}catch(t){console.error("Error loading item categories:",t),G([])}},Fe=async s=>{if(!s||s.length===0){X([]);return}try{const t=[];for(const c of s){const d=await I("/categories/sub",{params:{itemCategoryId:c}},{ttlMs:864e5});t.push(...d.data||[])}const r=t.filter((c,d,b)=>d===b.findIndex(h=>h.id===c.id));X(r)}catch(t){console.error("Error loading sub categories:",t),X([])}},Pe=async(s,t,r)=>{if(!(s!=null&&s.length)||!(t!=null&&t.length)||!(r!=null&&r.length)){Y([]);return}try{const c=[];for(const b of s)for(const h of t)for(const x of r){const g=await I("/skus",{params:{productCategory:b,itemCategory:h,subCategory:x,limit:1e3}},{ttlMs:6e4});c.push(...g.data||[])}const d=c.filter((b,h,x)=>h===x.findIndex(g=>g.id===b.id));Y(d)}catch(c){console.error("Error loading items:",c),Y([])}},Te=s=>{p({...a,categoryAccess:a.categoryAccess.filter((t,r)=>r!==s)})},qe=async()=>{var s,t;try{E(!0),V?await P.put(`/roles/${V.id}`,D):await P.post("/roles",D),R(!1),B(null),M({name:"",description:"",permissions:{}}),U()}catch(r){alert(((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.error)||"Failed to save role")}finally{E(!1)}},ze=async(s,t)=>{var r,c;if(window.confirm("Are you sure you want to delete this item?"))try{E(!0),s==="user"||s==="role"&&await P.delete(`/roles/${t}`),U()}catch(d){alert(((c=(r=d.response)==null?void 0:r.data)==null?void 0:c.error)||"Failed to delete item")}finally{E(!1)}},L=Ce.filter(s=>s.fullName.toLowerCase().includes(q.toLowerCase())||s.email.toLowerCase().includes(q.toLowerCase())),_e=s=>{switch(s.toLowerCase()){case"created":return"bg-green-100 text-green-800";case"updated":return"bg-blue-100 text-blue-800";case"deleted":return"bg-red-100 text-red-800";case"login":return"bg-purple-100 text-purple-800";case"logout":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-8 space-y-10 w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Access Control"}),e.jsx("p",{className:"text-lg text-slate-500 font-medium",children:"Manage user access, roles, and permissions."})]})}),e.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm p-2",children:e.jsx("nav",{className:"flex space-x-2",children:["users","roles","audit-logs"].map(s=>e.jsx("button",{onClick:()=>je(s),className:`px-6 py-3 rounded-2xl font-black text-[13px] uppercase tracking-wider transition-all ${w===s?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-slate-500 hover:bg-slate-50"}`,children:s.replace("-"," ")},s))})}),w==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:["all","pending","suspended"].map(s=>e.jsx("button",{onClick:()=>Ne(s),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize ${C===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s==="all"?"All Users":s==="pending"?"Pending Invitations":"Suspended Users"},s))})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 w-full sm:w-auto flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:q,onChange:s=>ve(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),C==="all"&&e.jsxs("select",{value:J,onChange:s=>we(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"sales",children:"User"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"accountant",children:"Accountant"})]})]}),C==="all"&&e.jsxs("button",{onClick:()=>be("/app/invite-user"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Invite User"]})]}),C==="all"&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Last Login"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Created Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:k?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No users found"})}):L.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.fullName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.role}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.department||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status==="active"?"Active":"Suspended"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.lastLogin?he(s.lastLogin):"Never"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:F(s.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"View",children:e.jsx(ye,{className:"w-4 h-4"})})})]},s.id))})]})})}),C==="pending"&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Invited By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Sent Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Expires In"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:k?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):Q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No pending invitations"})}):Q.map(s=>{const t=new Date(s.expiresAt),r=new Date,c=t.getTime()-r.getTime(),d=Math.ceil(c/(1e3*60*60*24));return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.role}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.invitedBy}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:F(s.sentDate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:d>0?`${d} days`:"Expired"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Resend",children:e.jsx(We,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Cancel",children:e.jsx(T,{className:"w-4 h-4"})})]})})]},s.id)})})]})})}),C==="suspended"&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Last Login"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Created Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:k?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No suspended users found"})}):L.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.fullName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.role}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.department||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-red-100 text-red-800",children:"Suspended"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.lastLogin?he(s.lastLogin):"Never"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:F(s.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"View",children:e.jsx(ye,{className:"w-4 h-4"})})})]},s.id))})]})})})]}),w==="roles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>{B(null),M({name:"",description:"",permissions:{}}),R(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"}),"Create Custom Role"]})}),e.jsx("div",{className:"space-y-4",children:k?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):ee.length===0?e.jsx("p",{className:"text-center text-gray-500 py-12",children:"No roles found"}):ee.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.isDefault&&e.jsx("button",{onClick:()=>{B(s),M({name:s.name,description:s.description||"",permissions:s.permissions||{}}),R(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx(Ge,{className:"w-4 h-4"})}),!s.isDefault&&e.jsx("button",{onClick:()=>ze("role",s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{const t=new Set(_);t.has(s.id)?t.delete(s.id):t.add(s.id),ke(t)},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:_.has(s.id)?e.jsx(Ye,{className:"w-4 h-4"}):e.jsx(He,{className:"w-4 h-4"})})]})]}),_.has(s.id)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Module permissions and category access details would be displayed here."})})]},s.id))})]}),w==="audit-logs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:re,onChange:s=>Ae(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:le,onChange:s=>Ie(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),e.jsx("input",{type:"text",value:de,onChange:s=>Ee(s.target.value),placeholder:"Search user",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),e.jsxs("select",{value:K,onChange:s=>Re(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"created",children:"Created"}),e.jsx("option",{value:"updated",children:"Updated"}),e.jsx("option",{value:"deleted",children:"Deleted"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"logout",children:"Logout"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Module"}),e.jsxs("select",{value:W,onChange:s=>De(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"sku",children:"SKU"}),e.jsx("option",{value:"inventory",children:"Inventory"}),e.jsx("option",{value:"users",children:"Users"}),e.jsx("option",{value:"settings",children:"Settings"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Apply Filters"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Export Audit Log"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Action"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Module"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User Agent"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:k?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):te.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No audit logs found"})}):te.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:F(s.timestamp)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.user}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${_e(s.action)}`,children:s.action})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.module}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.details||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.ipAddress||"-"}),e.jsx("td",{className:"px-4 py-3 text-xs text-gray-700",children:s.userAgent||"-"})]},s.id))})]})})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>{$(!1),S({})},children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invite User"}),e.jsx("button",{onClick:()=>{$(!1),S({})},className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:a.email,onChange:s=>p({...a,email:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.email?"border-red-500":"border-gray-300"}`}),n.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a.role,onChange:s=>{const t=s.target.value;if(t==="admin")p({...a,role:t,moduleAccess:{dashboard:{view:!0,create:!0,edit:!0,delete:!0},sku:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!0,create:!0,edit:!0,delete:!0},itemCategory:{view:!0,create:!0,edit:!0,delete:!0},subCategory:{view:!0,create:!0,edit:!0,delete:!0}},categoryAccess:a.categoryAccess.length>0?a.categoryAccess:[]});else if(t==="sales")p({...a,role:t,moduleAccess:{dashboard:{view:!1,create:!1,edit:!1,delete:!1},sku:{view:!0,create:!1,edit:!1,delete:!1},inventory:{view:!1,create:!1,edit:!1,delete:!1},reports:{view:!1,create:!1,edit:!1,delete:!1},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!1,create:!1,edit:!1,delete:!1},itemCategory:{view:!1,create:!1,edit:!1,delete:!1},subCategory:{view:!1,create:!1,edit:!1,delete:!1}},categoryAccess:[]});else if(t&&t!=="")if(window.confirm(`Are you sure you want to give access to ${t} role? You can configure specific permissions manually.`))p({...a,role:t});else{s.target.value=a.role;return}else p({...a,role:t})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.role?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"sales",children:"User"}),e.jsx("option",{value:"warehouse",disabled:!0,className:"opacity-50",children:"Warehouse"}),e.jsx("option",{value:"accountant",disabled:!0,className:"opacity-50",children:"Accountant"})]}),n.role&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.role})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.firstName,onChange:s=>p({...a,firstName:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.firstName?"border-red-500":"border-gray-300"}`}),n.firstName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.firstName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.lastName,onChange:s=>p({...a,lastName:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.lastName?"border-red-500":"border-gray-300"}`}),n.lastName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),e.jsx("input",{type:"text",value:a.employeeId,onChange:s=>p({...a,employeeId:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"EMP001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsx("input",{type:"text",value:a.department,onChange:s=>p({...a,department:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Module Access"}),e.jsx("span",{className:"text-sm text-red-500",children:"* At least one permission required"})]}),n.moduleAccess&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:n.moduleAccess})}),e.jsx("div",{className:"space-y-3",children:Object.entries(a.moduleAccess).filter(([s])=>s!=="accessControl").map(([s,t])=>{const c={sku:"SKU Management",accessControl:"Access Control",productCategory:"Product Category Access",itemCategory:"Item Category Access",subCategory:"Sub Category Access"}[s]||s.charAt(0).toUpperCase()+s.slice(1),d=a.role==="sales";if(!(!d||s==="sku"))return null;const h=d&&s==="sku";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium w-48",children:c})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.view,onChange:x=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,view:x.target.checked,create:x.target.checked&&!h?t.create:!1,edit:x.target.checked&&!h?t.edit:!1,delete:x.target.checked&&!h?t.delete:!1}}}),x.target.checked&&n.moduleAccess){const g={...n};delete g.moduleAccess,S(g)}},className:"rounded"}),e.jsx("span",{children:"View"})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.create,disabled:!t.view,onChange:x=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,create:x.target.checked}}}),x.target.checked&&n.moduleAccess){const g={...n};delete g.moduleAccess,S(g)}},className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:t.view?"":"text-gray-400",children:"Create"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.edit,disabled:!t.view,onChange:x=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,edit:x.target.checked}}}),x.target.checked&&n.moduleAccess){const g={...n};delete g.moduleAccess,S(g)}},className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:t.view?"":"text-gray-400",children:"Edit"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.delete,disabled:!t.view,onChange:x=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,delete:x.target.checked}}}),x.target.checked&&n.moduleAccess){const g={...n};delete g.moduleAccess,S(g)}},className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:t.view?"":"text-gray-400",children:"Delete"})]})]}),s==="accessControl"&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Super Admin Only)"})]})]},s)})})]}),a.role==="admin"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Access"}),e.jsxs("button",{onClick:$e,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[e.jsx(fe,{className:"w-4 h-4"}),"Add Category Access"]})]}),e.jsxs("div",{className:"space-y-4",children:[a.categoryAccess.map((s,t)=>{var r,c,d,b,h,x,g;return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Category Access ",t+1]}),e.jsx("button",{onClick:()=>Te(t),className:"text-red-600 hover:text-red-800",children:e.jsx(T,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Category"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:ie.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No product categories available"}):ie.map(l=>{var y;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.productCategoryIds)==null?void 0:y.includes(String(l.id)))||!1,onChange:f=>{const u=[...a.categoryAccess],j=u[t].productCategoryIds||[];f.target.checked?u[t].productCategoryIds=[...j,String(l.id)]:(u[t].productCategoryIds=j.filter(i=>i!==String(l.id)),u[t].itemCategoryIds=[],u[t].subCategoryIds=[],u[t].itemIds=[]),p({...a,categoryAccess:u}),Le(u[t].productCategoryIds)},className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:l.name})]},l.id)})}),((r=s.productCategoryIds)==null?void 0:r.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.productCategoryIds.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Category"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:ce.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:((c=s.productCategoryIds)==null?void 0:c.length)>0?"No item categories available":"Select Product Category first"}):ce.map(l=>{var y,f,u;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.itemCategoryIds)==null?void 0:y.includes(String(l.id)))||!1,onChange:j=>{const i=[...a.categoryAccess],N=i[t].itemCategoryIds||[];j.target.checked?i[t].itemCategoryIds=[...N,String(l.id)]:(i[t].itemCategoryIds=N.filter(A=>A!==String(l.id)),i[t].subCategoryIds=[],i[t].itemIds=[]),p({...a,categoryAccess:i}),Fe(i[t].itemCategoryIds)},disabled:!((f=s.productCategoryIds)!=null&&f.length),className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:`text-sm ${(u=s.productCategoryIds)!=null&&u.length?"text-gray-700":"text-gray-400"}`,children:l.name})]},l.id)})}),((d=s.itemCategoryIds)==null?void 0:d.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.itemCategoryIds.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Category"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:oe.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:((b=s.itemCategoryIds)==null?void 0:b.length)>0?"No sub categories available":"Select Item Category first"}):oe.map(l=>{var y,f,u;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.subCategoryIds)==null?void 0:y.includes(String(l.id)))||!1,onChange:j=>{var A,m,v;const i=[...a.categoryAccess],N=i[t].subCategoryIds||[];j.target.checked?i[t].subCategoryIds=[...N,String(l.id)]:(i[t].subCategoryIds=N.filter(xe=>xe!==String(l.id)),i[t].itemIds=[]),p({...a,categoryAccess:i}),(A=i[t].productCategoryIds)!=null&&A.length&&((m=i[t].itemCategoryIds)!=null&&m.length)&&((v=i[t].subCategoryIds)!=null&&v.length)&&Pe(i[t].productCategoryIds,i[t].itemCategoryIds,i[t].subCategoryIds)},disabled:!((f=s.itemCategoryIds)!=null&&f.length),className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:`text-sm ${(u=s.itemCategoryIds)!=null&&u.length?"text-gray-700":"text-gray-400"}`,children:l.name})]},l.id)})}),((h=s.subCategoryIds)==null?void 0:h.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.subCategoryIds.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:ne.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:((x=s.subCategoryIds)==null?void 0:x.length)>0?"No items available":"Select Sub Category first"}):ne.map(l=>{var y,f,u;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.itemIds)==null?void 0:y.includes(String(l.id)))||!1,onChange:j=>{const i=[...a.categoryAccess],N=i[t].itemIds||[];j.target.checked?i[t].itemIds=[...N,String(l.id)]:i[t].itemIds=N.filter(A=>A!==String(l.id)),p({...a,categoryAccess:i})},disabled:!((f=s.subCategoryIds)!=null&&f.length),className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:`text-sm ${(u=s.subCategoryIds)!=null&&u.length?"text-gray-700":"text-gray-400"}`,children:l.itemName||l.skuId})]},l.id)})}),((g=s.itemIds)==null?void 0:g.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.itemIds.length," selected"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Permissions"}),e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]}),n[`categoryAccess_${t}`]&&e.jsx("div",{className:"mb-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-600",children:n[`categoryAccess_${t}`]}),e.jsx("div",{className:"flex gap-4",children:["view","create","edit","delete"].map(l=>e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:s.permissions[l],onChange:y=>{const f=[...a.categoryAccess];if(f[t].permissions[l]=y.target.checked,p({...a,categoryAccess:f}),y.target.checked&&n[`categoryAccess_${t}`]){const u={...n};delete u[`categoryAccess_${t}`],S(u)}},className:"rounded"}),e.jsx("span",{className:"capitalize",children:l})]},l))})]})]},t)}),a.categoryAccess.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No category access added"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Review Summary"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[a.firstName," ",a.lastName," (",a.email,") will be invited as ",a.role,a.department&&` in ${a.department} department`,". Module access and category permissions as configured above."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>{$(!1),S({})},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Ue,disabled:k,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:k?"Sending...":"Send Invitation"})]})]})})}),Se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>R(!1),children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:V?"Edit Role":"Create Custom Role"}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:D.name,onChange:s=>M({...D,name:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:D.description,onChange:s=>M({...D,description:s.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Module Permissions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Module permissions matrix would be displayed here."})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:qe,disabled:k,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:k?"Saving...":"Save"})]})]})})})]})};export{ps as default};
