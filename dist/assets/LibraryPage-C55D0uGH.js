import{c as be,r as c,j as e,X,u as De,R as Le,B as _e}from"./index-v4UyLoar.js";import{l as b}from"./libraryService-BqxRzzIS.js";import{v as U,a as fe,b as je,c as Ee}from"./validators-CanHBN9q.js";import{utils as R,writeFile as se}from"./xlsx-D_0l8YDs.js";import{S as ae}from"./search-C_UOvm8j.js";import{P as K}from"./plus-DkwEl8bK.js";import{D as re}from"./download-WG4FeSf0.js";import{P as le}from"./pen-square-DBTKvIVg.js";import{T as ne}from"./trash-2-F_yzDzD4.js";import{a as $e,f as Be}from"./formatters-ptPrPoGe.js";import{s as ye}from"./skuService-CD47JNeC.js";import{P as Me}from"./package-hjcnhoIe.js";import{B as Ue}from"./building-2-D7A4OgTx.js";import{U as qe}from"./users-4F6_GLGy.js";import"./api-VNhYhLPD.js";import"./cachedApi-CKq13PPM.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=be("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),Ye=({vendors:P,loading:V,onRefresh:S})=>{const[T,F]=c.useState(""),[L,E]=c.useState(!1),[$,B]=c.useState(null),[_,f]=c.useState(!1),[d,A]=c.useState({}),D=c.useRef(null),[n,N]=c.useState([]),[p,v]=c.useState([]),[h,w]=c.useState([]),[C,M]=c.useState([]),[y,a]=c.useState(0),[s,o]=c.useState([{name:""}]),[i,u]=c.useState(!1),[r,I]=c.useState({name:"",contactPerson:"",designation:"",phone:"",email:"",gstNumber:"",address:"",city:"",state:"",pin:"",isActive:!0,productCategoryIds:[],itemCategoryIds:[],subCategoryIds:[],brandIds:[]});c.useEffect(()=>{L&&(b.getYourProductCategories().then(t=>{N(t.data||[])}),b.getYourBrands().then(t=>{M(t.data||[])}))},[L]),c.useEffect(()=>{L&&y>0?b.getYourItemCategories(y).then(t=>{v(t.data||[])}):(v([]),w([]),I({...r,itemCategoryIds:[],subCategoryIds:[]}))},[y,L]),c.useEffect(()=>{if(L&&r.itemCategoryIds&&r.itemCategoryIds.length>0){const t=r.itemCategoryIds.map(x=>b.getYourSubCategories(x));Promise.all(t).then(x=>{const q=x.flatMap(G=>G.data||[]).filter((G,ce,ie)=>ce===ie.findIndex(te=>te.id===G.id));w(q)})}else w([]),I({...r,subCategoryIds:[]})},[r.itemCategoryIds,L]);const W=t=>{if(t){B(t);const x=t.productCategoryIds&&t.productCategoryIds.length>0?t.productCategoryIds[0]:0;a(x),I({...t,productCategoryIds:t.productCategoryIds||[],itemCategoryIds:t.itemCategoryIds||[],subCategoryIds:t.subCategoryIds||[],brandIds:t.brandIds||[]})}else B(null),a(0),I({name:"",contactPerson:"",designation:"",phone:"",email:"",gstNumber:"",address:"",city:"",state:"",pin:"",isActive:!0,productCategoryIds:[],itemCategoryIds:[],subCategoryIds:[],brandIds:[]});v([]),w([]),o([{name:""}]),E(!0),A({})},J=t=>{const x=r.itemCategoryIds||[];x.includes(t)?I({...r,itemCategoryIds:x.filter(j=>j!==t)}):I({...r,itemCategoryIds:[...x,t]})},Q=t=>{const x=r.subCategoryIds||[];x.includes(t)?I({...r,subCategoryIds:x.filter(j=>j!==t)}):I({...r,subCategoryIds:[...x,t]})},z=t=>{const x=r.brandIds||[];x.includes(t)?I({...r,brandIds:x.filter(j=>j!==t)}):I({...r,brandIds:[...x,t]})},Z=()=>{o([...s,{name:""}])},H=t=>{s.length>1&&o(s.filter((x,j)=>j!==t))},oe=(t,x)=>{const j=[...s];j[t]={name:x},o(j)},xe=async()=>{var x,j;const t=s.filter(q=>q.name.trim()!=="");if(t.length===0){alert("Please add at least one brand");return}try{f(!0);const q=t.map(te=>b.createYourBrand({name:te.name.trim(),description:"",isActive:!0})),ce=(await Promise.all(q)).map(te=>te.data.id);I({...r,brandIds:[...r.brandIds||[],...ce]});const ie=await b.getYourBrands();M(ie.data||[]),o([{name:""}]),u(!1)}catch(q){alert(((j=(x=q.response)==null?void 0:x.data)==null?void 0:j.error)||"Failed to save brands")}finally{f(!1)}},ee=async()=>{var x,j;const t={};if(U(r.name||"")||(t.name="Vendor Name is required"),U(r.contactPerson||"")||(t.contactPerson="Contact Person is required"),U(r.designation||"")||(t.designation="Designation is required"),U(r.phone||"")?fe(r.phone||"")||(t.phone="Invalid phone number (10 digits)"):t.phone="Phone Number is required",U(r.email||"")?je(r.email||"")||(t.email="Invalid email format"):t.email="Email is required",U(r.gstNumber||"")?Ee(r.gstNumber||"")||(t.gstNumber="Invalid GST number format"):t.gstNumber="GST Number is required",U(r.pin||"")||(t.pin="Pincode is required"),U(r.city||"")||(t.city="City is required"),U(r.state||"")||(t.state="State is required"),U(r.address||"")||(t.address="Address is required"),(!y||y===0)&&(t.productCategory="Product Category is required"),(!r.brandIds||r.brandIds.length===0)&&(t.brands="At least one Brand is required"),Object.keys(t).length>0){A(t);return}try{f(!0),$?await b.updateYourVendor($.id,r):await b.createYourVendor(r),E(!1),S()}catch(q){alert(((j=(x=q.response)==null?void 0:x.data)==null?void 0:j.error)||"Failed to save vendor")}finally{f(!1)}},ue=async t=>{var x,j;if(window.confirm("Are you sure you want to delete this vendor?"))try{f(!0),await b.deleteYourVendor(t),S()}catch(q){alert(((j=(x=q.response)==null?void 0:x.data)==null?void 0:j.error)||"Failed to delete vendor")}finally{f(!1)}},pe=()=>{const t=[{Name:"","Contact Person":"",Designation:"",Phone:"",Email:"","GST Number":"",Address:"",City:"",State:"",PIN:"","Is Active":"true"}],x=R.book_new(),j=R.json_to_sheet(t);j["!cols"]=[{wch:25},{wch:20},{wch:18},{wch:15},{wch:25},{wch:18},{wch:30},{wch:15},{wch:15},{wch:10},{wch:12}],R.book_append_sheet(x,j,"Vendors Template"),se(x,"Vendor_Upload_Template.xlsx")},ge=()=>{var t;(t=D.current)==null||t.click()},he=async t=>{var j,q;if(!t)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(t.type)){alert("Please upload a valid Excel file (.xlsx, .xls) or CSV file");return}try{f(!0);const G=await b.uploadVendors(t);G.success&&(alert(`${G.message}
Inserted: ${G.inserted}
Errors: ${G.errors}`),S())}catch(G){alert(((q=(j=G.response)==null?void 0:j.data)==null?void 0:q.error)||"Failed to upload file")}finally{f(!1),D.current&&(D.current.value="")}},me=P.filter(t=>{var x,j,q;return t.name.toLowerCase().includes(T.toLowerCase())||((x=t.contactPerson)==null?void 0:x.toLowerCase().includes(T.toLowerCase()))||((j=t.designation)==null?void 0:j.toLowerCase().includes(T.toLowerCase()))||((q=t.email)==null?void 0:q.toLowerCase().includes(T.toLowerCase()))});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex-1 w-full sm:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search...",value:T,onChange:t=>F(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>W(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Add Vendor"]}),e.jsxs("button",{onClick:pe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",title:"Download Excel template with required columns",children:[e.jsx(re,{className:"w-5 h-5"}),"Download Template"]}),e.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Upload Excel"]}),e.jsx("input",{type:"file",ref:D,onChange:t=>{var x;return he(((x=t.target.files)==null?void 0:x[0])||null)},accept:".xlsx,.xls,.csv",className:"hidden"})]})]}),V?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Vendor Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Contact Person"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Designation"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"GST Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:me.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:"No vendors found"})}):me.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.contactPerson||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.designation||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.phone||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.email||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.gstNumber||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.address||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>W(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ue(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},t.id))})]})})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:$?"Edit Vendor":"Add Vendor"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Vendor Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.name,onChange:t=>I({...r,name:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.name?"border-red-500":"border-gray-300"}`}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Person ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.contactPerson,onChange:t=>I({...r,contactPerson:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.contactPerson?"border-red-500":"border-gray-300"}`}),d.contactPerson&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.contactPerson})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Designation ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.designation,onChange:t=>I({...r,designation:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.designation?"border-red-500":"border-gray-300"}`}),d.designation&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.designation})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.phone,onChange:t=>I({...r,phone:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.phone?"border-red-500":"border-gray-300"}`}),d.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.phone})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:r.email,onChange:t=>I({...r,email:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.email?"border-red-500":"border-gray-300"}`}),d.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["GST Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.gstNumber,onChange:t=>I({...r,gstNumber:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.gstNumber?"border-red-500":"border-gray-300"}`}),d.gstNumber&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.gstNumber})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pincode ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.pin,onChange:t=>I({...r,pin:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.pin?"border-red-500":"border-gray-300"}`}),d.pin&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.pin})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.city,onChange:t=>I({...r,city:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.city?"border-red-500":"border-gray-300"}`}),d.city&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.city})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["State ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.state,onChange:t=>I({...r,state:t.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.state?"border-red-500":"border-gray-300"}`}),d.state&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.state})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:r.address,onChange:t=>I({...r,address:t.target.value}),rows:3,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.address?"border-red-500":"border-gray-300"}`}),d.address&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.address})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Select Product Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:y,onChange:t=>{const x=parseInt(t.target.value);a(x),I({...r,productCategoryIds:x>0?[x]:[],itemCategoryIds:[],subCategoryIds:[]})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.productCategory?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"0",children:"Select Product Category"}),n.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),d.productCategory&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.productCategory})]}),y>0&&p.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Categories (Select Multiple)"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-2 space-y-2",children:p.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:(r.itemCategoryIds||[]).includes(t.id),onChange:()=>J(t.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.name})]},t.id))})]}),r.itemCategoryIds&&r.itemCategoryIds.length>0&&h.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub Categories (Select Multiple)"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-2 space-y-2",children:h.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:(r.subCategoryIds||[]).includes(t.id),onChange:()=>Q(t.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.name})]},t.id))})]}),r.productCategoryIds&&r.productCategoryIds.length>0||r.itemCategoryIds&&r.itemCategoryIds.length>0||r.subCategoryIds&&r.subCategoryIds.length>0?e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Items"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 max-h-48 overflow-y-auto",children:[r.productCategoryIds&&r.productCategoryIds.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-1",children:"Product Categories:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.productCategoryIds.map(t=>{const x=n.find(j=>j.id===t);return x?e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:x.name},t):null})})]}),r.itemCategoryIds&&r.itemCategoryIds.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-1",children:"Item Categories:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.itemCategoryIds.map(t=>{const x=p.find(j=>j.id===t);return x?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:x.name},t):null})})]}),r.subCategoryIds&&r.subCategoryIds.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-1",children:"Sub Categories:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.subCategoryIds.map(t=>{const x=h.find(j=>j.id===t);return x?e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:x.name},t):null})})]})]})]}):null,e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Brands ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("button",{type:"button",onClick:()=>u(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),"Add Multiple Brands"]})]}),e.jsx("div",{className:`max-h-40 overflow-y-auto border rounded-lg p-2 space-y-2 ${d.brands?"border-red-500":"border-gray-300"}`,children:C.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No brands available"}):C.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:(r.brandIds||[]).includes(t.id),onChange:()=>z(t.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.name})]},t.id))}),d.brands&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.brands})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:r.isActive===!0,onChange:()=>I({...r,isActive:!0}),className:"text-blue-600"}),e.jsx("span",{children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:r.isActive===!1,onChange:()=>I({...r,isActive:!1}),className:"text-blue-600"}),e.jsx("span",{children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>E(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ee,disabled:_,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:_?"Saving...":"Save"})]})]})})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Multiple Brands"}),e.jsx("button",{onClick:()=>{u(!1),o([{name:""}])},className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Brand Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("button",{type:"button",onClick:Z,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),"Add Another"]})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:s.map((t,x)=>e.jsxs("div",{className:"flex gap-2 items-center p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:t.name,onChange:j=>oe(x,j.target.value),placeholder:`Brand Name ${x+1}`,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})}),s.length>1&&e.jsx("button",{type:"button",onClick:()=>H(x),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove",children:e.jsx(X,{className:"w-4 h-4"})})]},x))})]})}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>{u(!1),o([{name:""}])},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:xe,disabled:_||s.filter(t=>t.name.trim()).length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:_?"Saving...":`Save ${s.filter(t=>t.name.trim()).length} Brand(s)`})]})]})})})]})},Ge=({brands:P,loading:V,onRefresh:S})=>{const[T,F]=c.useState(""),[L,E]=c.useState(!1),[$,B]=c.useState(null),[_,f]=c.useState(!1),[d,A]=c.useState({}),D=c.useRef(null),[n,N]=c.useState({name:"",description:"",isActive:!0}),p=a=>{a?(B(a),N(a)):(B(null),N({name:"",description:"",isActive:!0})),E(!0),A({})},v=async()=>{var s,o;const a={};if(U(n.name||"")||(a.name="Brand Name is required"),Object.keys(a).length>0){A(a);return}try{f(!0),$?await b.updateYourBrand($.id,n):await b.createYourBrand(n),E(!1),S()}catch(i){alert(((o=(s=i.response)==null?void 0:s.data)==null?void 0:o.error)||"Failed to save brand")}finally{f(!1)}},h=async a=>{var s,o;if(window.confirm("Are you sure you want to delete this brand?"))try{f(!0),await b.deleteYourBrand(a),S()}catch(i){alert(((o=(s=i.response)==null?void 0:s.data)==null?void 0:o.error)||"Failed to delete brand")}finally{f(!1)}},w=()=>{const a=[{Name:"",Description:"","Is Active":"true"}],s=R.book_new(),o=R.json_to_sheet(a);o["!cols"]=[{wch:25},{wch:40},{wch:12}],R.book_append_sheet(s,o,"Brands Template"),se(s,"Brand_Upload_Template.xlsx")},C=()=>{var a;(a=D.current)==null||a.click()},M=async a=>{var o,i;if(!a)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(a.type)){alert("Please upload a valid Excel file (.xlsx, .xls) or CSV file");return}try{f(!0);const u=await b.uploadBrands(a);u.success&&(alert(`${u.message}
Inserted: ${u.inserted}
Errors: ${u.errors}`),S())}catch(u){alert(((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to upload file")}finally{f(!1),D.current&&(D.current.value="")}},y=P.filter(a=>{var s;return a.name.toLowerCase().includes(T.toLowerCase())||((s=a.description)==null?void 0:s.toLowerCase().includes(T.toLowerCase()))});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex-1 w-full sm:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search...",value:T,onChange:a=>F(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>p(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Add Brand"]}),e.jsxs("button",{onClick:w,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",title:"Download Excel template with required columns",children:[e.jsx(re,{className:"w-5 h-5"}),"Download Template"]}),e.jsxs("button",{onClick:C,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Upload Excel"]}),e.jsx("input",{type:"file",ref:D,onChange:a=>{var s;return M(((s=a.target.files)==null?void 0:s[0])||null)},accept:".xlsx,.xls,.csv",className:"hidden"})]})]}),V?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Brand Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Created Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No brands found"})}):y.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.description||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${a.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.createdAt?$e(a.createdAt):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(a),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},a.id))})]})})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:$?"Edit Brand":"Add Brand"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Brand Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.name,onChange:a=>N({...n,name:a.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.name?"border-red-500":"border-gray-300"}`}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:n.description,onChange:a=>N({...n,description:a.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:n.isActive===!0,onChange:()=>N({...n,isActive:!0}),className:"text-blue-600"}),e.jsx("span",{children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:n.isActive===!1,onChange:()=>N({...n,isActive:!1}),className:"text-blue-600"}),e.jsx("span",{children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>E(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:_,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:_?"Saving...":"Save"})]})]})})})]})},Oe=({productCategories:P,itemCategories:V,subCategories:S,loading:T,onRefresh:F})=>{const L=De(),[E,$]=c.useState(""),[B,_]=c.useState([]),[f,d]=c.useState(!1),[A,D]=c.useState(null),[n,N]=c.useState("product"),[p,v]=c.useState(!1),[h,w]=c.useState({}),[C,M]=c.useState(!1),y=c.useRef(null),[a,s]=c.useState({name:""}),[o,i]=c.useState({name:"",productCategoryId:0}),[u,r]=c.useState({name:"",itemCategoryId:0}),[I,W]=c.useState([]),[J,Q]=c.useState([]),[z,Z]=c.useState([{name:""}]),[H,oe]=c.useState([{name:""}]);c.useEffect(()=>{const l=[];P.forEach(m=>{l.push({id:`product-${m.id}`,type:"product",productCategory:m.name,itemCategory:"-",subCategory:"-",createdAt:m.createdAt||"",productCategoryId:m.id})}),V.forEach(m=>{const g=P.find(k=>k.id===m.productCategoryId);l.push({id:`item-${m.id}`,type:"item",productCategory:(g==null?void 0:g.name)||"-",itemCategory:m.name,subCategory:"-",createdAt:m.createdAt||"",productCategoryId:m.productCategoryId,itemCategoryId:m.id})}),S.forEach(m=>{const g=V.find(O=>O.id===m.itemCategoryId),k=P.find(O=>O.id===(g==null?void 0:g.productCategoryId));l.push({id:`sub-${m.id}`,type:"sub",productCategory:(k==null?void 0:k.name)||"-",itemCategory:(g==null?void 0:g.name)||"-",subCategory:m.name,createdAt:m.createdAt||"",productCategoryId:k==null?void 0:k.id,itemCategoryId:m.itemCategoryId,subCategoryId:m.id})}),l.sort((m,g)=>{const k=new Date(m.createdAt).getTime();return new Date(g.createdAt).getTime()-k}),_(l)},[P,V,S]),c.useEffect(()=>{f&&(b.getYourProductCategories().then(l=>{W(l.data||[])}),(n==="sub"||n==="item")&&b.getYourItemCategories().then(l=>{Q(l.data||[])}))},[f,n]);const xe=B.filter(l=>{const m=E.toLowerCase();return!!l.productCategory&&l.productCategory!=="-"&&!!l.itemCategory&&l.itemCategory!=="-"&&!!l.subCategory&&l.subCategory!=="-"?l.productCategory.toLowerCase().includes(m)||l.itemCategory.toLowerCase().includes(m)||l.subCategory.toLowerCase().includes(m):!1}),ee=()=>{d(!1),D(null),w({}),M(!1)},ue=()=>{Z([...z,{name:""}])},pe=(l,m)=>{const g=[...z];g[l]={name:m},Z(g)},ge=l=>{z.length>1&&Z(z.filter((m,g)=>g!==l))},he=()=>{oe([...H,{name:""}])},me=(l,m)=>{const g=[...H];g[l]={name:m},oe(g)},t=l=>{H.length>1&&oe(H.filter((m,g)=>g!==l))},x=async()=>{var m,g;const l=z.filter(k=>k.name.trim()!=="");if(l.length===0){w({name:"Please add at least one item category"});return}if(!o.productCategoryId||o.productCategoryId===0){w({productCategoryId:"Product Category is required"});return}try{v(!0);const k=l.map(O=>b.createYourItemCategory({name:O.name.trim(),productCategoryId:o.productCategoryId}));await Promise.all(k),ee(),F()}catch(k){alert(((g=(m=k.response)==null?void 0:m.data)==null?void 0:g.error)||"Failed to save item categories")}finally{v(!1)}},j=async()=>{var m,g;const l=H.filter(k=>k.name.trim()!=="");if(l.length===0){w({name:"Please add at least one sub category"});return}if(!u.itemCategoryId||u.itemCategoryId===0){w({itemCategoryId:"Item Category is required"});return}try{v(!0);const k=l.map(O=>b.createYourSubCategory({name:O.name.trim(),itemCategoryId:u.itemCategoryId}));await Promise.all(k),ee(),F()}catch(k){alert(((g=(m=k.response)==null?void 0:m.data)==null?void 0:g.error)||"Failed to save sub categories")}finally{v(!1)}},q=async()=>{var m,g;if(C&&n==="item"){await x();return}if(C&&n==="sub"){await j();return}const l={};if(n==="product"?U(a.name)||(l.name="Category Name is required"):n==="item"?(U(o.name)||(l.name="Category Name is required"),(!o.productCategoryId||o.productCategoryId===0)&&(l.productCategoryId="Product Category is required")):n==="sub"&&(U(u.name)||(l.name="Category Name is required"),(!u.itemCategoryId||u.itemCategoryId===0)&&(l.itemCategoryId="Item Category is required")),Object.keys(l).length>0){w(l);return}try{v(!0),A?n==="product"&&A.productCategoryId?await b.updateYourProductCategory(A.productCategoryId,a):n==="item"&&A.itemCategoryId?await b.updateYourItemCategory(A.itemCategoryId,o):n==="sub"&&A.subCategoryId&&await b.updateYourSubCategory(A.subCategoryId,u):n==="product"?await b.createYourProductCategory(a):n==="item"?await b.createYourItemCategory(o):n==="sub"&&await b.createYourSubCategory(u),ee(),F()}catch(k){alert(((g=(m=k.response)==null?void 0:m.data)==null?void 0:g.error)||`Failed to save ${n} category`)}finally{v(!1)}},G=async l=>{var g,k;const m=l.type==="product"?"product category":l.type==="item"?"item category":"sub category";if(window.confirm(`Are you sure you want to delete this ${m}?`))try{v(!0),l.type==="product"&&l.productCategoryId?await b.deleteYourProductCategory(l.productCategoryId):l.type==="item"&&l.itemCategoryId?await b.deleteYourItemCategory(l.itemCategoryId):l.type==="sub"&&l.subCategoryId&&await b.deleteYourSubCategory(l.subCategoryId),F()}catch(O){alert(((k=(g=O.response)==null?void 0:g.data)==null?void 0:k.error)||`Failed to delete ${m}`)}finally{v(!1)}},ce=()=>{const l=R.book_new(),m=[["Category Master Template","",""],["Product Category","Item Category","Sub Category"],["","",""]],g=R.aoa_to_sheet(m);g["!cols"]=[{wch:25},{wch:25},{wch:25}],g["!merges"]=[{s:{r:0,c:0},e:{r:0,c:2}}],R.book_append_sheet(l,g,"Category Master"),se(l,"Category_Master_Upload_Template.xlsx")},ie=()=>{var l;(l=y.current)==null||l.click()},te=async l=>{var g,k,O,Ne,ve,we,Ce,Ie,Se,ke,Ae,Pe,Te;if(!l)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(l.type)){alert("Please upload a valid Excel file (.xlsx, .xls) or CSV file");return}try{v(!0);const Y=await b.uploadCategories(l);if(Y.success){const Fe=`Upload Summary:

Product Categories: ${((g=Y.productCategories)==null?void 0:g.inserted)||0} inserted, ${((k=Y.productCategories)==null?void 0:k.updated)||0} already existed, ${((O=Y.productCategories)==null?void 0:O.errors)||0} errors
Item Categories: ${((Ne=Y.itemCategories)==null?void 0:Ne.inserted)||0} inserted, ${((ve=Y.itemCategories)==null?void 0:ve.updated)||0} already existed, ${((we=Y.itemCategories)==null?void 0:we.errors)||0} errors
Sub Categories: ${((Ce=Y.subCategories)==null?void 0:Ce.inserted)||0} inserted, ${((Ie=Y.subCategories)==null?void 0:Ie.updated)||0} already existed, ${((Se=Y.subCategories)==null?void 0:Se.errors)||0} errors`;alert(Fe),F()}else alert(Y.message||"Failed to upload file")}catch(Y){alert(((Ae=(ke=Y.response)==null?void 0:ke.data)==null?void 0:Ae.error)||((Te=(Pe=Y.response)==null?void 0:Pe.data)==null?void 0:Te.message)||"Failed to upload file")}finally{v(!1),y.current&&(y.current.value="")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:E,onChange:l=>$(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>L("/app/library/categories/manage"),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm",children:[e.jsx(K,{className:"w-4 h-4"}),"Add Product"]}),e.jsxs("button",{onClick:ce,className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2 text-sm",title:"Download unified Excel template with all category types",children:[e.jsx(re,{className:"w-4 h-4"}),"Download Template"]}),e.jsxs("button",{onClick:ie,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 text-sm",children:[e.jsx(de,{className:"w-4 h-4"}),"Upload Excel"]}),e.jsx("input",{type:"file",ref:y,onChange:l=>{var m;return te(((m=l.target.files)==null?void 0:m[0])||null)},accept:".xlsx,.xls,.csv",className:"hidden"})]})]}),T?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-6 h-6 border-3 border-blue-600 border-t-transparent rounded-full animate-spin"})}):xe.length===0?e.jsx("div",{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-600 text-sm",children:"No categories found"})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 uppercase",children:"Product Category"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 uppercase",children:"Item Category"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 uppercase",children:"Sub Category"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 uppercase",children:"Created Date"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:xe.map(l=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900 text-center",children:l.productCategory}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900 text-center",children:l.itemCategory}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900 text-center",children:l.subCategory}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-500 text-center",children:l.createdAt?$e(l.createdAt):"-"}),e.jsx("td",{className:"px-3 py-2 text-xs text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>L("/app/library/categories/manage",{state:{fromCategoryMaster:!0,type:l.type,productCategoryId:l.productCategoryId,itemCategoryId:l.itemCategoryId,subCategoryId:l.subCategoryId}}),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(le,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>G(l),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(ne,{className:"w-3.5 h-3.5"})})]})})]},l.id))})]})})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:`bg-white rounded-lg shadow-xl w-full mx-4 max-h-[90vh] overflow-y-auto ${C&&(n==="item"||n==="sub")?"max-w-3xl":"max-w-2xl"}`,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:A?`Edit ${n==="product"?"Product":n==="item"?"Item":"Sub"} Category`:`Add ${n==="product"?"Product":n==="item"?"Item":"Sub"} Category`}),e.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-5 h-5"})})]}),(n==="item"||n==="sub")&&!A&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Entry Mode"}),e.jsx("span",{className:"text-[10px] text-gray-500 mt-0.5",children:C?"Add multiple categories at once":"Add one category at a time"})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:`text-xs font-medium transition-colors ${C?"text-gray-500":"text-gray-900"}`,children:"Single"}),e.jsx("button",{type:"button",onClick:()=>{M(!C),w({})},className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${C?"bg-blue-600":"bg-gray-300"}`,role:"switch","aria-checked":C,children:e.jsx("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform ${C?"translate-x-5":"translate-x-0.5"}`})}),e.jsx("span",{className:`text-xs font-medium transition-colors ${C?"text-gray-900":"text-gray-500"}`,children:"Multiple"})]})]}),e.jsxs("div",{className:"space-y-4",children:[n==="product"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Product Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.name,onChange:l=>s({name:l.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-sm ${h.name?"border-red-500":"border-gray-300"}`}),h.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.name})]}),n==="item"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Product Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.productCategoryId,onChange:l=>i({...o,productCategoryId:parseInt(l.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm ${h.productCategoryId?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"0",children:"Select Product Category"}),I.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),h.productCategoryId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.productCategoryId})]}),C&&!A?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Item Category Names ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[z.map((l,m)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:g=>pe(m,g.target.value),placeholder:`Item Category ${m+1}`,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"}),z.length>1&&e.jsx("button",{type:"button",onClick:()=>ge(m),className:"px-2 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(X,{className:"w-4 h-4"})})]},m)),e.jsxs("button",{type:"button",onClick:ue,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(K,{className:"w-3.5 h-3.5"}),"Add Another"]})]}),h.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.name})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Item Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.name,onChange:l=>i({...o,name:l.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-sm ${h.name?"border-red-500":"border-gray-300"}`}),h.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.name})]})]}),n==="sub"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Item Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:u.itemCategoryId,onChange:l=>r({...u,itemCategoryId:parseInt(l.target.value)}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm ${h.itemCategoryId?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"0",children:"Select Item Category"}),J.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),h.itemCategoryId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.itemCategoryId})]}),C&&!A?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Sub Category Names ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[H.map((l,m)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:g=>me(m,g.target.value),placeholder:`Sub Category ${m+1}`,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"}),H.length>1&&e.jsx("button",{type:"button",onClick:()=>t(m),className:"px-2 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(X,{className:"w-4 h-4"})})]},m)),e.jsxs("button",{type:"button",onClick:he,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(K,{className:"w-3.5 h-3.5"}),"Add Another"]})]}),h.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.name})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Sub Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:u.name,onChange:l=>r({...u,name:l.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-sm ${h.name?"border-red-500":"border-gray-300"}`}),h.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.name})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2.5 mt-4",children:[e.jsx("button",{onClick:ee,className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:p,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm",children:p?"Saving...":A?"Update":"Save"})]})]})})})]})},ze=({teams:P,loading:V,onRefresh:S})=>{const[T,F]=c.useState(""),[L,E]=c.useState(!1),[$,B]=c.useState(null),[_,f]=c.useState(!1),[d,A]=c.useState({}),D=c.useRef(null),[n,N]=c.useState({name:"",contactNumber:"",emailId:"",department:"",designation:"",isActive:!0}),p=a=>{a?(B(a),N({...a})):(B(null),N({name:"",contactNumber:"",emailId:"",department:"",designation:"",isActive:!0})),E(!0),A({})},v=async()=>{var s,o;const a={};if(U(n.name||"")||(a.name="Name is required"),U(n.contactNumber||"")?fe(n.contactNumber||"")||(a.contactNumber="Invalid phone number (10 digits)"):a.contactNumber="Contact Number is required",U(n.emailId||"")?je(n.emailId||"")||(a.emailId="Invalid email format"):a.emailId="Email ID is required",U(n.department||"")||(a.department="Department is required"),U(n.designation||"")||(a.designation="Designation is required"),Object.keys(a).length>0){A(a);return}try{f(!0),$?await b.updateTeam($.id,n):await b.createTeam(n),E(!1),S()}catch(i){alert(((o=(s=i.response)==null?void 0:s.data)==null?void 0:o.error)||"Failed to save team member")}finally{f(!1)}},h=async a=>{var s,o;if(window.confirm("Are you sure you want to delete this team member?"))try{f(!0),await b.deleteTeam(a),S()}catch(i){alert(((o=(s=i.response)==null?void 0:s.data)==null?void 0:o.error)||"Failed to delete team member")}finally{f(!1)}},w=()=>{const a=[{Name:"","Contact Number":"","Email ID":"",Department:"",Designation:"","Is Active":"true"}],s=R.book_new(),o=R.json_to_sheet(a);o["!cols"]=[{wch:25},{wch:18},{wch:25},{wch:20},{wch:20},{wch:12}],R.book_append_sheet(s,o,"Teams Template"),se(s,"Team_Upload_Template.xlsx")},C=()=>{var a;(a=D.current)==null||a.click()},M=async a=>{var o,i;if(!a)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(a.type)){alert("Please upload a valid Excel file (.xlsx, .xls) or CSV file");return}try{f(!0);const u=await b.uploadTeams(a);u.success&&(alert(`${u.message}
Inserted: ${u.inserted}
Errors: ${u.errors}`),S())}catch(u){alert(((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to upload file")}finally{f(!1),D.current&&(D.current.value="")}},y=P.filter(a=>{var s,o,i,u;return a.name.toLowerCase().includes(T.toLowerCase())||((s=a.contactNumber)==null?void 0:s.toLowerCase().includes(T.toLowerCase()))||((o=a.emailId)==null?void 0:o.toLowerCase().includes(T.toLowerCase()))||((i=a.department)==null?void 0:i.toLowerCase().includes(T.toLowerCase()))||((u=a.designation)==null?void 0:u.toLowerCase().includes(T.toLowerCase()))});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex-1 w-full sm:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search...",value:T,onChange:a=>F(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>p(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Add Team"]}),e.jsxs("button",{onClick:w,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",title:"Download Excel template with required columns",children:[e.jsx(re,{className:"w-5 h-5"}),"Download Template"]}),e.jsxs("button",{onClick:C,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Upload Excel"]}),e.jsx("input",{type:"file",ref:D,onChange:a=>{var s;return M(((s=a.target.files)==null?void 0:s[0])||null)},accept:".xlsx,.xls,.csv",className:"hidden"})]})]}),V?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Contact Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Designation"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No team members found"})}):y.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.contactNumber||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.emailId||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.department||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.designation||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(a),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},a.id))})]})})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:$?"Edit Team Member":"Add Team Member"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.name,onChange:a=>N({...n,name:a.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter name"}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.contactNumber,onChange:a=>N({...n,contactNumber:a.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.contactNumber?"border-red-500":"border-gray-300"}`,placeholder:"Enter contact number"}),d.contactNumber&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.contactNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:n.emailId,onChange:a=>N({...n,emailId:a.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.emailId?"border-red-500":"border-gray-300"}`,placeholder:"Enter email ID"}),d.emailId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.emailId})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.department,onChange:a=>N({...n,department:a.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.department?"border-red-500":"border-gray-300"}`,placeholder:"Enter department"}),d.department&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.department})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Designation ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.designation,onChange:a=>N({...n,designation:a.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.designation?"border-red-500":"border-gray-300"}`,placeholder:"Enter designation"}),d.designation&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.designation})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>E(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:_,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:_?"Saving...":"Save"})]})]})})})]})},He=({customers:P,loading:V,onRefresh:S})=>{const[T,F]=c.useState(""),[L,E]=c.useState(!1),[$,B]=c.useState(null),[_,f]=c.useState(!1),[d,A]=c.useState({}),D=c.useRef(null),[n,N]=c.useState({name:"",contactPerson:"",phone:"",email:"",gstNumber:"",address:"",city:"",state:"",pin:"",isActive:!0}),p=P.filter(s=>{var i,u,r,I,W,J,Q;const o=T.toLowerCase();return((i=s.name)==null?void 0:i.toLowerCase().includes(o))||((u=s.contactPerson)==null?void 0:u.toLowerCase().includes(o))||((r=s.phone)==null?void 0:r.toLowerCase().includes(o))||((I=s.email)==null?void 0:I.toLowerCase().includes(o))||((W=s.gstNumber)==null?void 0:W.toLowerCase().includes(o))||((J=s.city)==null?void 0:J.toLowerCase().includes(o))||((Q=s.state)==null?void 0:Q.toLowerCase().includes(o))}),v=s=>{s?(B(s),N({name:s.name||"",contactPerson:s.contactPerson||"",phone:s.phone||"",email:s.email||"",gstNumber:s.gstNumber||"",address:s.address||"",city:s.city||"",state:s.state||"",pin:s.pin||"",isActive:s.isActive!==!1})):(B(null),N({name:"",contactPerson:"",phone:"",email:"",gstNumber:"",address:"",city:"",state:"",pin:"",isActive:!0})),A({}),E(!0)},h=()=>{E(!1),B(null),A({})},w=async()=>{var o,i;const s={};if(U(n.name||"")||(s.name="Customer Name is required"),n.email&&!je(n.email)&&(s.email="Invalid email format"),n.phone&&!fe(n.phone)&&(s.phone="Invalid phone number (10 digits)"),n.gstNumber&&!Ee(n.gstNumber)&&(s.gstNumber="Invalid GST number format"),Object.keys(s).length>0){A(s);return}try{f(!0),$?await b.updateCustomer($.id,n):await b.createCustomer(n),h(),S()}catch(u){alert(((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to save customer")}finally{f(!1)}},C=async s=>{var o,i;if(window.confirm("Are you sure you want to delete this customer?"))try{f(!0),await b.deleteCustomer(s),S()}catch(u){alert(((i=(o=u.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to delete customer")}finally{f(!1)}},M=()=>{const s=[{Name:"","Contact Person":"",Phone:"",Email:"","GST Number":"",Address:"",City:"",State:"",PIN:"","Is Active":"true"}],o=R.book_new(),i=R.json_to_sheet(s);i["!cols"]=[{wch:25},{wch:20},{wch:15},{wch:25},{wch:18},{wch:30},{wch:15},{wch:15},{wch:10},{wch:12}],R.book_append_sheet(o,i,"Customers Template"),se(o,"Customer_Upload_Template.xlsx")},y=()=>{var s;(s=D.current)==null||s.click()},a=async s=>{var i,u;if(!s)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(s.type)){alert("Please upload a valid Excel file (.xlsx, .xls) or CSV file");return}try{f(!0);const r=await b.uploadCustomers(s);r.success&&(alert(`${r.message}
Inserted: ${r.inserted}
Errors: ${r.errors}`),S())}catch(r){alert(((u=(i=r.response)==null?void 0:i.data)==null?void 0:u.error)||"Failed to upload file")}finally{f(!1),D.current&&(D.current.value="")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:T,onChange:s=>F(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>v(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Add Customer"]}),e.jsxs("button",{onClick:M,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",title:"Download Excel template with required columns",children:[e.jsx(re,{className:"w-5 h-5"}),"Download Template"]}),e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Upload Excel"]}),e.jsx("input",{type:"file",ref:D,onChange:s=>{var o;return a(((o=s.target.files)==null?void 0:o[0])||null)},accept:".xlsx,.xls,.csv",className:"hidden"})]})]}),V?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"Customer Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"Contact Person"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"Phone"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"GST Number"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"City"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-3 py-6 text-center text-gray-500 text-xs",children:"No customers found"})}):p.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-xs font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:s.contactPerson||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:s.phone||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:s.email||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:s.gstNumber||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:s.city||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:s.state||"-"}),e.jsx("td",{className:"px-3 py-2 text-xs",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-3 py-2 text-xs",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},s.id))})]})})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:$?"Edit Customer":"Add Customer"}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.name,onChange:s=>N({...n,name:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.name?"border-red-500":"border-gray-300"}`}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),e.jsx("input",{type:"text",value:n.contactPerson,onChange:s=>N({...n,contactPerson:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"text",value:n.phone,onChange:s=>N({...n,phone:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.phone?"border-red-500":"border-gray-300"}`}),d.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:n.email,onChange:s=>N({...n,email:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.email?"border-red-500":"border-gray-300"}`}),d.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GST Number"}),e.jsx("input",{type:"text",value:n.gstNumber,onChange:s=>N({...n,gstNumber:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${d.gstNumber?"border-red-500":"border-gray-300"}`}),d.gstNumber&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.gstNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{value:n.address,onChange:s=>N({...n,address:s.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",value:n.city,onChange:s=>N({...n,city:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx("input",{type:"text",value:n.state,onChange:s=>N({...n,state:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN"}),e.jsx("input",{type:"text",value:n.pin,onChange:s=>N({...n,pin:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:n.isActive!==!1,onChange:s=>N({...n,isActive:s.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:w,disabled:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:_?"Saving...":$?"Update":"Save"})]})]})})})]})},Ke=({products:P,loading:V,onRefresh:S})=>{const T=De(),[F,L]=c.useState(""),[E,$]=c.useState(!1),[B,_]=c.useState(!1),f=c.useRef(null),d=async p=>{var v,h;if(window.confirm("Are you sure you want to delete this product?"))try{$(!0),await ye.delete(p),S()}catch(w){alert(((h=(v=w.response)==null?void 0:v.data)==null?void 0:h.error)||"Failed to delete product")}finally{$(!1)}},A=()=>{var p;(p=f.current)==null||p.click()},D=()=>{const h=[{"Item Name":"","Product Category":"","Item Category":"","Sub Category":"",Vendor:"",Brand:"",Unit:"PCS","HSN Code":"",Model:"",Series:"","Rating Size":"",Material:"",Insulation:"","Input Supply":"",Color:"",CRI:"",CCT:"","Beam Angle":"","LED Type":"",Shape:"",Weight:"",Length:"",Width:"",Height:"",currentStock:"",MinimumStocks:"","Default Storage Location":"","Item Details":"","Vendor Item Code":"",Status:"active"}],w="Products Template",C="Product_Upload_Template.xlsx",M=[{wch:25},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:10},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:12},{wch:12},{wch:12},{wch:10},{wch:10},{wch:10},{wch:10},{wch:15},{wch:15},{wch:18},{wch:30},{wch:18},{wch:12}],y=R.book_new(),a=R.json_to_sheet(h);a["!cols"]=M,R.book_append_sheet(y,a,w),se(y,C)},n=async p=>{var h,w,C,M;if(!p)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(p.type)){alert("Please upload a valid Excel file (.xlsx, .xls) or CSV file");return}try{_(!0);const y=await ye.upload(p);if(y.success){const a=`Uploaded ${y.inserted} products successfully${y.errors>0?`
${y.errors} errors occurred`:""}`;if(alert(a),y.errorDetails&&y.errorDetails.length>0){const s=y.errorDetails.map(o=>`Row ${o.row}: ${o.error}`).join(`
`);console.error("Upload errors:",s)}S()}else alert(y.message||"Failed to upload products")}catch(y){console.error("Upload error:",y),alert(((w=(h=y.response)==null?void 0:h.data)==null?void 0:w.error)||((M=(C=y.response)==null?void 0:C.data)==null?void 0:M.message)||"Failed to upload file")}finally{_(!1),f.current&&(f.current.value="")}},N=P.filter(p=>{var v,h,w,C;return((v=p.skuId)==null?void 0:v.toLowerCase().includes(F.toLowerCase()))||((h=p.itemName)==null?void 0:h.toLowerCase().includes(F.toLowerCase()))||((w=p.brand)==null?void 0:w.toLowerCase().includes(F.toLowerCase()))||((C=p.model)==null?void 0:C.toLowerCase().includes(F.toLowerCase()))});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex-1 w-full sm:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search...",value:F,onChange:p=>L(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>T("/app/sku/create"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Create New SKU"]}),e.jsxs("button",{onClick:D,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",title:"Download Excel template with required columns",children:[e.jsx(re,{className:"w-5 h-5"}),"Download Template"]}),e.jsxs("button",{onClick:A,disabled:B,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(de,{className:"w-5 h-5"}),B?"Uploading...":"Upload Excel"]}),e.jsx("input",{type:"file",ref:f,onChange:p=>{var v;return n(((v=p.target.files)==null?void 0:v[0])||null)},accept:".xlsx,.xls,.csv",className:"hidden"})]})]}),V?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"SKU ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Product Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Brand"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Model"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"HSN Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Current Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-8 text-center text-gray-500",children:"No products found"})}):N.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:p.skuId}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.itemName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.productCategory||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.itemCategory||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.brand||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.vendor||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.model||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.hsnSacCode||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Be(p.currentStock||0)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>window.location.href=`/app/sku/${p.id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>d(p.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},p.id))})]})})})]})})},xt=()=>{const[P,V]=c.useState("category-master"),[S,T]=c.useState({"category-master":!1,products:!1,brands:!1,vendors:!1,customers:!1,teams:!1}),[F,L]=c.useState([]),[E,$]=c.useState([]),[B,_]=c.useState([]),[f,d]=c.useState([]),[A,D]=c.useState([]),[n,N]=c.useState([]),[p,v]=c.useState([]),[h,w]=c.useState([]),C=i=>{V(i),M(i)},M=async(i,u=!1)=>{if(!(S[i]&&!u)&&!(!u&&(i==="vendors"&&F.length>0||i==="brands"&&E.length>0||i==="category-master"&&B.length>0||i==="teams"&&n.length>0||i==="customers"&&p.length>0||i==="products"&&h.length>0)))try{switch(T(r=>({...r,[i]:!0})),i){case"vendors":const r=await b.getYourVendors();L(r.data||[]);break;case"brands":const I=await b.getYourBrands();$(I.data||[]);break;case"category-master":const[W,J,Q]=await Promise.all([b.getYourProductCategories(),b.getYourItemCategories(),b.getYourSubCategories()]);_(W.data||[]),d(J.data||[]),D(Q.data||[]);break;case"teams":const z=await b.getTeams();N(z.data||[]);break;case"customers":const Z=await b.getCustomers();v(Z.data||[]);break;case"products":const H=await ye.getAll({limit:1e4});w(H.data||[]);break}}catch(r){console.error(`Error loading ${i}:`,r)}finally{T(r=>({...r,[i]:!1}))}},y=async i=>{switch(i){case"vendors":L([]);break;case"brands":$([]);break;case"category-master":_([]),d([]),D([]);break;case"teams":N([]);break;case"customers":v([]);break;case"products":w([]);break}await M(i,!0)};Le.useEffect(()=>{M(P)},[P]);const a=[{key:"category-master",label:"Category Master",description:"Product hierarchy",icon:e.jsx(_e,{className:"w-5 h-5"})},{key:"products",label:"Products",description:"SKU catalog",icon:e.jsx(Me,{className:"w-5 h-5"})},{key:"brands",label:"Brands",description:"Brand directory",icon:e.jsx(Ue,{className:"w-5 h-5"})},{key:"vendors",label:"Vendors",description:"Supplier network",icon:e.jsx(qe,{className:"w-5 h-5"})},{key:"customers",label:"Customers",description:"Client database",icon:e.jsx(Re,{className:"w-5 h-5"})},{key:"teams",label:"Teams",description:"User groups",icon:e.jsx(Ve,{className:"w-5 h-5"})}],s=()=>{const i=a.find(u=>u.key===P);return(i==null?void 0:i.label)||"Library"},o=()=>{switch(P){case"category-master":return"Manage product  item  sub-category hierarchy";case"products":return"View and manage your product catalog";case"brands":return"Manage brand information";case"vendors":return"Manage vendor and supplier information";case"customers":return"Manage customer information";case"teams":return"Manage team members and departments";default:return""}};return e.jsx("div",{className:"p-4 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Library"}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Master Data"}),e.jsx("nav",{className:"space-y-1",children:a.map(i=>{const u=P===i.key,r=S[i.key];return e.jsxs("button",{onClick:()=>C(i.key),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-colors ${u?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("span",{className:u?"text-blue-600":"text-gray-400",children:i.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium",children:i.label}),e.jsx("div",{className:`text-xs ${u?"text-blue-600":"text-gray-500"}`,children:i.description})]}),r&&e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]},i.key)})})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-9",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s()}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o()})]}),e.jsxs("div",{className:"p-6",children:[P==="category-master"&&e.jsx(Oe,{productCategories:B,itemCategories:f,subCategories:A,loading:S["category-master"],onRefresh:()=>y("category-master")}),P==="vendors"&&e.jsx(Ye,{vendors:F,loading:S.vendors,onRefresh:()=>y("vendors")}),P==="brands"&&e.jsx(Ge,{brands:E,loading:S.brands,onRefresh:()=>y("brands")}),P==="teams"&&e.jsx(ze,{teams:n,loading:S.teams,onRefresh:()=>y("teams")}),P==="customers"&&e.jsx(He,{customers:p,loading:S.customers,onRefresh:()=>y("customers")}),P==="products"&&e.jsx(Ke,{products:h,loading:S.products,onRefresh:()=>y("products")})]})]})})]})]})})};export{xt as default};
