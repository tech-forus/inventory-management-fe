import{c as x,u,r as s,j as e,a as j,A as N}from"./index-BNvq7L73.js";import{s as b}from"./skuService-BaVM3Gme.js";import{b as i,f as v,a as w}from"./formatters-ptPrPoGe.js";import{g as k}from"./skuClassification-OWMuJwKY.js";import{A as S}from"./arrow-left-BgDROCgl.js";import{D}from"./download-B9r3QDrU.js";import{T}from"./trash-2-CJo7E_kE.js";import"./api-BJ7xcL-N.js";import"./cachedApi-DyAQX7TM.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=x("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=x("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),q=()=>{const m=u(),[p,o]=s.useState(!1),[r,c]=s.useState([]),[h,g]=s.useState(0),[a,f]=s.useState(k());s.useEffect(()=>{const t=()=>{const n=localStorage.getItem("appSettings");if(n)try{const d=JSON.parse(n);d.planningThresholds&&f(d.planningThresholds)}catch(d){console.error("Error loading planning thresholds:",d)}};t();const l=()=>{t()};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]),s.useEffect(()=>{y()},[a]),s.useEffect(()=>{const t=r.reduce((l,n)=>l+n.inventoryValue,0);g(t)},[r]);const y=async()=>{try{o(!0);const t=await b.getNonMovable({period:a.non_moving_days,minQty:a.non_moving_min_qty});c(t.data||[])}catch(t){console.error("Error loading non-movable SKUs:",t),c([])}finally{o(!1)}};return e.jsxs("div",{className:"p-8 space-y-10 w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m("/app/sku"),className:"text-slate-600 hover:text-slate-900 transition-colors",children:e.jsx(S,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Non-Movable SKUs"})]}),e.jsx("p",{className:"text-lg text-slate-500 font-medium",children:"SKUs classified as non-moving (dead stock) based on configured planning thresholds."})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-[2.5rem] p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-red-900 mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Current Classification Thresholds"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-red-700 font-medium",children:"Days Threshold:"}),e.jsxs("span",{className:"ml-2 text-red-900 font-bold",children:[a.non_moving_days," days"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-red-700 font-medium",children:"Quantity Threshold:"}),e.jsxs("span",{className:"ml-2 text-red-900 font-bold",children:["â‰¥ ",a.non_moving_min_qty," units"]})]})]})]})})}),e.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Export"]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg px-6 py-3",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Dead Stock Value"}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:i(h)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"SKU ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Current Stock (Dead Stock)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Last Movement Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Aging (Days)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Inventory Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:"No non-movable SKUs found"})}):r.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:t.skuId}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.itemName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:t.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-red-600 font-semibold",children:v(t.currentStock)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:w(t.lastMovementDate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4 text-red-500"}),t.aging," days"]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:i(t.unitPrice)}),e.jsx("td",{className:"px-4 py-3 text-sm text-red-700 font-semibold",children:i(t.inventoryValue)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-red-100 text-red-800 rounded hover:bg-red-200 flex items-center gap-1",title:"Liquidate",children:[e.jsx(E,{className:"w-4 h-4"}),"Liquidate"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-800 rounded hover:bg-gray-200 flex items-center gap-1",title:"Write-off",children:[e.jsx(T,{className:"w-4 h-4"}),"Write-off"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded hover:bg-blue-200 flex items-center gap-1",title:"Return to Vendor",children:[e.jsx(_,{className:"w-4 h-4"}),"Return"]})]})})]},t.skuId))})]})})})]})};export{q as default};
