import{u as Ve,r as o,j as e}from"./index-C4O2RVGC.js";import{c as fe,a as P}from"./formatters-ptPrPoGe.js";import{b as Be,v as J}from"./validators-CanHBN9q.js";import{a as U}from"./api-VNhYhLPD.js";import{c as I}from"./cachedApi-CKq13PPM.js";import{S as Ke}from"./search-Cs94nLwN.js";import{U as We}from"./user-plus-B_s7hr9_.js";import{E as be}from"./eye-C7eBhAd0.js";import{T as Q}from"./trash-2-BS2IYTwN.js";import{M as Ge}from"./mail-C2HLJ2r3.js";import{X as T}from"./x-ChutkFoY.js";import{P as je}from"./plus-DdeNo8e1.js";import{P as Xe}from"./pen-square-CYmGiHf-.js";import{C as Ye}from"./chevron-up-TgpC2_zN.js";import{C as He}from"./chevron-down-CuFOjVxo.js";import{D as Je}from"./download-BnsO4lfA.js";const gs=()=>{const Ne=Ve(),[C,ve]=o.useState("users"),[k,we]=o.useState("all"),[j,E]=o.useState(!1),[q,Ce]=o.useState(""),[Z,ke]=o.useState(""),[Ae,z]=o.useState([]),[ee,se]=o.useState([]),[te,ae]=o.useState([]),[re,le]=o.useState([]),[_,Se]=o.useState(new Set),[O,L]=o.useState(!1),[Ie,R]=o.useState(!1),[V,B]=o.useState(null),[a,p]=o.useState({email:"",firstName:"",lastName:"",employeeId:"",role:"",department:"",moduleAccess:{dashboard:{view:!0,create:!1,edit:!1,delete:!1},sku:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!1,edit:!1,delete:!1},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!0,create:!0,edit:!0,delete:!0},itemCategory:{view:!0,create:!0,edit:!0,delete:!0},subCategory:{view:!0,create:!0,edit:!0,delete:!0}},categoryAccess:[]}),[D,M]=o.useState({name:"",description:"",permissions:{}}),[de,Ee]=o.useState(""),[ie,Re]=o.useState(""),[ce,De]=o.useState(""),[K,Me]=o.useState("all"),[W,$e]=o.useState("all"),[oe,Ue]=o.useState([]),[ne,G]=o.useState([]),[xe,X]=o.useState([]),[me,Y]=o.useState([]),[n,A]=o.useState({});o.useEffect(()=>{$()},[C,k]);const $=async()=>{var s,t;try{switch(E(!0),C){case"users":if(k==="all"){const d=await I("/users",{params:{role:Z}},{ttlMs:12e4});z(d.data||[])}else if(k==="pending"){const d=await I("/users/invitations",void 0,{ttlMs:6e4});se(d.data||[])}else{const d=await I("/users",{params:{status:"suspended"}},{ttlMs:12e4});z(d.data||[])}break;case"roles":const l=await I("/roles",void 0,{ttlMs:10*60*1e3});ae(l.data||[]);break;case"audit-logs":const x=await I("/access-control/audit-logs",{params:{dateFrom:de,dateTo:ie,user:ce,actionType:K!=="all"?K:void 0,module:W!=="all"?W:void 0}},{ttlMs:1*60*1e3});le(x.data||[]);break}}catch(l){console.error("Error loading data:",l),(t=(s=l.response)==null?void 0:s.data)!=null&&t.error?console.error("API Error:",l.response.data.error):l.message&&console.error("Error message:",l.message),C==="users"?(z([]),se([])):C==="roles"?ae([]):C==="audit-logs"&&le([])}finally{E(!1)}};o.useEffect(()=>{O&&I("/categories/product",void 0,{ttlMs:24*60*60*1e3}).then(s=>{Ue(s.data||[])})},[O]);const Le=async()=>{var l,x,d,f,h,c,m,r,y,b,g,N,i,v,S;const s={};if(Be(a.email)||(s.email="Valid email is required"),J(a.firstName)||(s.firstName="First Name is required"),J(a.lastName)||(s.lastName="Last Name is required"),J(a.role)||(s.role="Role is required"),Object.values(a.moduleAccess).some(u=>u.view||u.create||u.edit||u.delete)||(s.moduleAccess="At least one permission must be selected in Module Access"),a.categoryAccess.length>0&&a.categoryAccess.forEach((u,w)=>{var ge,pe,he,ye;((ge=u.permissions)==null?void 0:ge.view)||((pe=u.permissions)==null?void 0:pe.create)||((he=u.permissions)==null?void 0:he.edit)||((ye=u.permissions)==null?void 0:ye.delete)||(s[`categoryAccess_${w}`]=`Category Access ${w+1}: At least one permission must be selected`)}),Object.keys(s).length>0){A(s);return}try{E(!0),await U.post("/users/invite",a),L(!1),p({email:"",firstName:"",lastName:"",employeeId:"",role:"",department:"",moduleAccess:{dashboard:{view:!0,create:!1,edit:!1,delete:!1},sku:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!1,edit:!1,delete:!1},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!0,create:!0,edit:!0,delete:!0},itemCategory:{view:!0,create:!0,edit:!0,delete:!0},subCategory:{view:!0,create:!0,edit:!0,delete:!0}},categoryAccess:[]}),$()}catch(u){if(console.error("Error inviting user:",u),((l=u.response)==null?void 0:l.status)===409){const w=((d=(x=u.response)==null?void 0:x.data)==null?void 0:d.error)||((h=(f=u.response)==null?void 0:f.data)==null?void 0:h.message)||"User with this email already exists";alert(`Invitation failed: ${w}

Please use a different email address or check if this user has already been invited.`)}else if(((c=u.response)==null?void 0:c.status)===400){const w=((r=(m=u.response)==null?void 0:m.data)==null?void 0:r.error)||((b=(y=u.response)==null?void 0:y.data)==null?void 0:b.message)||"Invalid data provided";alert(`Invitation failed: ${w}

Please check all required fields and try again.`)}else if(((g=u.response)==null?void 0:g.status)===500)alert("Server error: Failed to send invitation. Please try again later or contact support.");else{const w=((i=(N=u.response)==null?void 0:N.data)==null?void 0:i.error)||((S=(v=u.response)==null?void 0:v.data)==null?void 0:S.message)||u.message||"Failed to send invitation";alert(`Invitation failed: ${w}`)}}finally{E(!1)}},Fe=()=>{p({...a,categoryAccess:[...a.categoryAccess,{productCategoryIds:[],itemCategoryIds:[],subCategoryIds:[],itemIds:[],permissions:{view:!0,create:!1,edit:!1,delete:!1}}]})},Pe=async s=>{if(!s||s.length===0){G([]);return}try{const t=[];for(const x of s){const d=await I("/categories/item",{params:{productCategoryId:x}},{ttlMs:864e5});t.push(...d.data||[])}const l=t.filter((x,d,f)=>d===f.findIndex(h=>h.id===x.id));G(l)}catch(t){console.error("Error loading item categories:",t),G([])}},Te=async s=>{if(!s||s.length===0){X([]);return}try{const t=[];for(const x of s){const d=await I("/categories/sub",{params:{itemCategoryId:x}},{ttlMs:864e5});t.push(...d.data||[])}const l=t.filter((x,d,f)=>d===f.findIndex(h=>h.id===x.id));X(l)}catch(t){console.error("Error loading sub categories:",t),X([])}},qe=async(s,t,l)=>{if(!(s!=null&&s.length)||!(t!=null&&t.length)||!(l!=null&&l.length)){Y([]);return}try{const x=[];for(const f of s)for(const h of t)for(const c of l){const m=await I("/skus",{params:{productCategory:f,itemCategory:h,subCategory:c,limit:1e3}},{ttlMs:6e4});x.push(...m.data||[])}const d=x.filter((f,h,c)=>h===c.findIndex(m=>m.id===f.id));Y(d)}catch(x){console.error("Error loading items:",x),Y([])}},ze=s=>{p({...a,categoryAccess:a.categoryAccess.filter((t,l)=>l!==s)})},_e=async()=>{var s,t;try{E(!0),V?await U.put(`/roles/${V.id}`,D):await U.post("/roles",D),R(!1),B(null),M({name:"",description:"",permissions:{}}),$()}catch(l){alert(((t=(s=l.response)==null?void 0:s.data)==null?void 0:t.error)||"Failed to save role")}finally{E(!1)}},H=async(s,t,l,x)=>{var f,h,c,m;const d=s==="user"?`Are you sure you want to delete ${l||"this user"} (${x||""})? This action cannot be undone and will permanently remove all their data and deny access.`:"Are you sure you want to delete this item?";if(window.confirm(d))try{E(!0),s==="user"?(await U.delete(`/users/${t}`),alert("User deleted successfully. Their access has been revoked.")):s==="role"&&(await U.delete(`/roles/${t}`),alert("Role deleted successfully.")),$()}catch(r){const y=((h=(f=r.response)==null?void 0:f.data)==null?void 0:h.error)||((m=(c=r.response)==null?void 0:c.data)==null?void 0:m.message)||"Failed to delete item";alert(`Error: ${y}`)}finally{E(!1)}},F=Ae.filter(s=>s.fullName.toLowerCase().includes(q.toLowerCase())||s.email.toLowerCase().includes(q.toLowerCase())),Oe=s=>{switch(s.toLowerCase()){case"created":return"bg-green-100 text-green-800";case"updated":return"bg-blue-100 text-blue-800";case"deleted":return"bg-red-100 text-red-800";case"login":return"bg-purple-100 text-purple-800";case"logout":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-8 space-y-10 w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Access Control"}),e.jsx("p",{className:"text-lg text-slate-500 font-medium",children:"Manage user access, roles, and permissions."})]})}),e.jsx("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm p-2",children:e.jsx("nav",{className:"flex space-x-2",children:["users","roles","audit-logs"].map(s=>e.jsx("button",{onClick:()=>ve(s),className:`px-6 py-3 rounded-2xl font-black text-[13px] uppercase tracking-wider transition-all ${C===s?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-slate-500 hover:bg-slate-50"}`,children:s.replace("-"," ")},s))})}),C==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:["all","pending","suspended"].map(s=>e.jsx("button",{onClick:()=>we(s),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize ${k===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s==="all"?"All Users":s==="pending"?"Pending Invitations":"Suspended Users"},s))})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 w-full sm:w-auto flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:q,onChange:s=>Ce(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),k==="all"&&e.jsxs("select",{value:Z,onChange:s=>ke(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"sales",children:"User"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"accountant",children:"Accountant"})]})]}),k==="all"&&e.jsxs("button",{onClick:()=>Ne("/app/invite-user"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(We,{className:"w-5 h-5"}),"Invite User"]})]}),k==="all"&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Last Login"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Created Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):F.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No users found"})}):F.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.fullName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.role}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.department||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status==="active"?"Active":"Suspended"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.lastLogin?fe(s.lastLogin):"Never"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:P(s.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>H("user",s.id,s.fullName,s.email),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",disabled:j,children:e.jsx(Q,{className:"w-4 h-4"})})]})})]},s.id))})]})})}),k==="pending"&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Invited By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Sent Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Expires In"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):ee.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No pending invitations"})}):ee.map(s=>{const t=new Date(s.expiresAt),l=new Date,x=t.getTime()-l.getTime(),d=Math.ceil(x/(1e3*60*60*24));return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.role}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.invitedBy}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:P(s.sentDate)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:d>0?`${d} days`:"Expired"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Resend",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Cancel",children:e.jsx(T,{className:"w-4 h-4"})})]})})]},s.id)})})]})})}),k==="suspended"&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Last Login"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Created Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):F.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No suspended users found"})}):F.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.fullName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.role}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.department||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-red-100 text-red-800",children:"Suspended"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.lastLogin?fe(s.lastLogin):"Never"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:P(s.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>H("user",s.id,s.fullName,s.email),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",disabled:j,children:e.jsx(Q,{className:"w-4 h-4"})})]})})]},s.id))})]})})})]}),C==="roles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>{B(null),M({name:"",description:"",permissions:{}}),R(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),"Create Custom Role"]})}),e.jsx("div",{className:"space-y-4",children:j?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):te.length===0?e.jsx("p",{className:"text-center text-gray-500 py-12",children:"No roles found"}):te.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.isDefault&&e.jsx("button",{onClick:()=>{B(s),M({name:s.name,description:s.description||"",permissions:s.permissions||{}}),R(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx(Xe,{className:"w-4 h-4"})}),!s.isDefault&&e.jsx("button",{onClick:()=>H("role",s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{const t=new Set(_);t.has(s.id)?t.delete(s.id):t.add(s.id),Se(t)},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:_.has(s.id)?e.jsx(Ye,{className:"w-4 h-4"}):e.jsx(He,{className:"w-4 h-4"})})]})]}),_.has(s.id)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Module permissions and category access details would be displayed here."})})]},s.id))})]}),C==="audit-logs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:de,onChange:s=>Ee(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:ie,onChange:s=>Re(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),e.jsx("input",{type:"text",value:ce,onChange:s=>De(s.target.value),placeholder:"Search user",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Type"}),e.jsxs("select",{value:K,onChange:s=>Me(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"created",children:"Created"}),e.jsx("option",{value:"updated",children:"Updated"}),e.jsx("option",{value:"deleted",children:"Deleted"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"logout",children:"Logout"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Module"}),e.jsxs("select",{value:W,onChange:s=>$e(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"sku",children:"SKU"}),e.jsx("option",{value:"inventory",children:"Inventory"}),e.jsx("option",{value:"users",children:"Users"}),e.jsx("option",{value:"settings",children:"Settings"})]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Apply Filters"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Export Audit Log"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Action"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Module"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User Agent"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})})}):re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No audit logs found"})}):re.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:P(s.timestamp)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s.user}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${Oe(s.action)}`,children:s.action})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:s.module}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.details||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.ipAddress||"-"}),e.jsx("td",{className:"px-4 py-3 text-xs text-gray-700",children:s.userAgent||"-"})]},s.id))})]})})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>{L(!1),A({})},children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invite User"}),e.jsx("button",{onClick:()=>{L(!1),A({})},className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:a.email,onChange:s=>p({...a,email:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.email?"border-red-500":"border-gray-300"}`}),n.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a.role,onChange:s=>{const t=s.target.value;if(t==="admin")p({...a,role:t,moduleAccess:{dashboard:{view:!0,create:!0,edit:!0,delete:!0},sku:{view:!0,create:!0,edit:!0,delete:!0},inventory:{view:!0,create:!0,edit:!0,delete:!0},reports:{view:!0,create:!0,edit:!0,delete:!0},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!0,create:!0,edit:!0,delete:!0},itemCategory:{view:!0,create:!0,edit:!0,delete:!0},subCategory:{view:!0,create:!0,edit:!0,delete:!0}},categoryAccess:a.categoryAccess.length>0?a.categoryAccess:[]});else if(t==="sales")p({...a,role:t,moduleAccess:{dashboard:{view:!1,create:!1,edit:!1,delete:!1},sku:{view:!0,create:!1,edit:!1,delete:!1},inventory:{view:!1,create:!1,edit:!1,delete:!1},reports:{view:!1,create:!1,edit:!1,delete:!1},accessControl:{view:!1,create:!1,edit:!1,delete:!1},productCategory:{view:!1,create:!1,edit:!1,delete:!1},itemCategory:{view:!1,create:!1,edit:!1,delete:!1},subCategory:{view:!1,create:!1,edit:!1,delete:!1}},categoryAccess:[]});else if(t&&t!=="")if(window.confirm(`Are you sure you want to give access to ${t} role? You can configure specific permissions manually.`))p({...a,role:t});else{s.target.value=a.role;return}else p({...a,role:t})},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.role?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"sales",children:"User"}),e.jsx("option",{value:"warehouse",disabled:!0,className:"opacity-50",children:"Warehouse"}),e.jsx("option",{value:"accountant",disabled:!0,className:"opacity-50",children:"Accountant"})]}),n.role&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.role})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.firstName,onChange:s=>p({...a,firstName:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.firstName?"border-red-500":"border-gray-300"}`}),n.firstName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.firstName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.lastName,onChange:s=>p({...a,lastName:s.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${n.lastName?"border-red-500":"border-gray-300"}`}),n.lastName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),e.jsx("input",{type:"text",value:a.employeeId,onChange:s=>p({...a,employeeId:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"EMP001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsx("input",{type:"text",value:a.department,onChange:s=>p({...a,department:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Module Access"}),e.jsx("span",{className:"text-sm text-red-500",children:"* At least one permission required"})]}),n.moduleAccess&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:n.moduleAccess})}),e.jsx("div",{className:"space-y-3",children:Object.entries(a.moduleAccess).filter(([s])=>s!=="accessControl").map(([s,t])=>{const x={sku:"SKU Management",accessControl:"Access Control",productCategory:"Product Category Access",itemCategory:"Item Category Access",subCategory:"Sub Category Access"}[s]||s.charAt(0).toUpperCase()+s.slice(1),d=a.role==="sales";if(!(!d||s==="sku"))return null;const h=d&&s==="sku";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium w-48",children:x})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.view,onChange:c=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,view:c.target.checked,create:c.target.checked&&!h?t.create:!1,edit:c.target.checked&&!h?t.edit:!1,delete:c.target.checked&&!h?t.delete:!1}}}),c.target.checked&&n.moduleAccess){const m={...n};delete m.moduleAccess,A(m)}},className:"rounded"}),e.jsx("span",{children:"View"})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.create,disabled:!t.view,onChange:c=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,create:c.target.checked}}}),c.target.checked&&n.moduleAccess){const m={...n};delete m.moduleAccess,A(m)}},className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:t.view?"":"text-gray-400",children:"Create"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.edit,disabled:!t.view,onChange:c=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,edit:c.target.checked}}}),c.target.checked&&n.moduleAccess){const m={...n};delete m.moduleAccess,A(m)}},className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:t.view?"":"text-gray-400",children:"Edit"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.delete,disabled:!t.view,onChange:c=>{if(p({...a,moduleAccess:{...a.moduleAccess,[s]:{...t,delete:c.target.checked}}}),c.target.checked&&n.moduleAccess){const m={...n};delete m.moduleAccess,A(m)}},className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:t.view?"":"text-gray-400",children:"Delete"})]})]}),s==="accessControl"&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Super Admin Only)"})]})]},s)})})]}),a.role==="admin"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Category Access"}),e.jsxs("button",{onClick:Fe,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1",children:[e.jsx(je,{className:"w-4 h-4"}),"Add Category Access"]})]}),e.jsxs("div",{className:"space-y-4",children:[a.categoryAccess.map((s,t)=>{var l,x,d,f,h,c,m;return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Category Access ",t+1]}),e.jsx("button",{onClick:()=>ze(t),className:"text-red-600 hover:text-red-800",children:e.jsx(T,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Category"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:oe.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No product categories available"}):oe.map(r=>{var y;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.productCategoryIds)==null?void 0:y.includes(String(r.id)))||!1,onChange:b=>{const g=[...a.categoryAccess],N=g[t].productCategoryIds||[];b.target.checked?g[t].productCategoryIds=[...N,String(r.id)]:(g[t].productCategoryIds=N.filter(i=>i!==String(r.id)),g[t].itemCategoryIds=[],g[t].subCategoryIds=[],g[t].itemIds=[]),p({...a,categoryAccess:g}),Pe(g[t].productCategoryIds)},className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:r.name})]},r.id)})}),((l=s.productCategoryIds)==null?void 0:l.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.productCategoryIds.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Category"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:ne.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:((x=s.productCategoryIds)==null?void 0:x.length)>0?"No item categories available":"Select Product Category first"}):ne.map(r=>{var y,b,g;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.itemCategoryIds)==null?void 0:y.includes(String(r.id)))||!1,onChange:N=>{const i=[...a.categoryAccess],v=i[t].itemCategoryIds||[];N.target.checked?i[t].itemCategoryIds=[...v,String(r.id)]:(i[t].itemCategoryIds=v.filter(S=>S!==String(r.id)),i[t].subCategoryIds=[],i[t].itemIds=[]),p({...a,categoryAccess:i}),Te(i[t].itemCategoryIds)},disabled:!((b=s.productCategoryIds)!=null&&b.length),className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:`text-sm ${(g=s.productCategoryIds)!=null&&g.length?"text-gray-700":"text-gray-400"}`,children:r.name})]},r.id)})}),((d=s.itemCategoryIds)==null?void 0:d.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.itemCategoryIds.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Category"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:xe.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:((f=s.itemCategoryIds)==null?void 0:f.length)>0?"No sub categories available":"Select Item Category first"}):xe.map(r=>{var y,b,g;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.subCategoryIds)==null?void 0:y.includes(String(r.id)))||!1,onChange:N=>{var S,u,w;const i=[...a.categoryAccess],v=i[t].subCategoryIds||[];N.target.checked?i[t].subCategoryIds=[...v,String(r.id)]:(i[t].subCategoryIds=v.filter(ue=>ue!==String(r.id)),i[t].itemIds=[]),p({...a,categoryAccess:i}),(S=i[t].productCategoryIds)!=null&&S.length&&((u=i[t].itemCategoryIds)!=null&&u.length)&&((w=i[t].subCategoryIds)!=null&&w.length)&&qe(i[t].productCategoryIds,i[t].itemCategoryIds,i[t].subCategoryIds)},disabled:!((b=s.itemCategoryIds)!=null&&b.length),className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:`text-sm ${(g=s.itemCategoryIds)!=null&&g.length?"text-gray-700":"text-gray-400"}`,children:r.name})]},r.id)})}),((h=s.subCategoryIds)==null?void 0:h.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.subCategoryIds.length," selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:me.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:((c=s.subCategoryIds)==null?void 0:c.length)>0?"No items available":"Select Sub Category first"}):me.map(r=>{var y,b,g;return e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-50 rounded px-2",children:[e.jsx("input",{type:"checkbox",checked:((y=s.itemIds)==null?void 0:y.includes(String(r.id)))||!1,onChange:N=>{const i=[...a.categoryAccess],v=i[t].itemIds||[];N.target.checked?i[t].itemIds=[...v,String(r.id)]:i[t].itemIds=v.filter(S=>S!==String(r.id)),p({...a,categoryAccess:i})},disabled:!((b=s.subCategoryIds)!=null&&b.length),className:"rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("span",{className:`text-sm ${(g=s.subCategoryIds)!=null&&g.length?"text-gray-700":"text-gray-400"}`,children:r.itemName||r.skuId})]},r.id)})}),((m=s.itemIds)==null?void 0:m.length)>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.itemIds.length," selected"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Permissions"}),e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]}),n[`categoryAccess_${t}`]&&e.jsx("div",{className:"mb-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-600",children:n[`categoryAccess_${t}`]}),e.jsx("div",{className:"flex gap-4",children:["view","create","edit","delete"].map(r=>e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:s.permissions[r],onChange:y=>{const b=[...a.categoryAccess];if(b[t].permissions[r]=y.target.checked,p({...a,categoryAccess:b}),y.target.checked&&n[`categoryAccess_${t}`]){const g={...n};delete g[`categoryAccess_${t}`],A(g)}},className:"rounded"}),e.jsx("span",{className:"capitalize",children:r})]},r))})]})]},t)}),a.categoryAccess.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No category access added"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Review Summary"}),e.jsxs("p",{className:"text-sm text-blue-800",children:[a.firstName," ",a.lastName," (",a.email,") will be invited as ",a.role,a.department&&` in ${a.department} department`,". Module access and category permissions as configured above."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>{L(!1),A({})},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Le,disabled:j,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:j?"Sending...":"Send Invitation"})]})]})})}),Ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>R(!1),children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:V?"Edit Role":"Create Custom Role"}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:D.name,onChange:s=>M({...D,name:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:D.description,onChange:s=>M({...D,description:s.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Module Permissions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Module permissions matrix would be displayed here."})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:_e,disabled:j,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:j?"Saving...":"Save"})]})]})})})]})};export{gs as default};
