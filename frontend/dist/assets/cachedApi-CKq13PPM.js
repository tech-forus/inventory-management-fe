import{a as y}from"./api-VNhYhLPD.js";const i="nexusinv:cache:";function u(){return Date.now()}function f(t){try{return JSON.parse(t)}catch{return null}}function m(){const t=localStorage.getItem("user")||sessionStorage.getItem("user"),n=t?f(t):null,e=n!=null&&n.companyId?String(n.companyId):"unknownCompany",r=n!=null&&n.email?String(n.email):"unknownUser";return`${e}:${r}`}function a(t){return`${i}${m()}:${t}`}function S(t){const n=localStorage.getItem(a(t));if(!n)return null;const e=f(n);return!e||typeof e.e!="number"||e.e<=u()?(localStorage.removeItem(a(t)),null):e.v??null}function g(t,n,e){const r={v:n,e:u()+e};try{localStorage.setItem(a(t),JSON.stringify(r))}catch{}}function $(t){const n=`${i}${m()}:${t}`;try{for(let e=localStorage.length-1;e>=0;e--){const r=localStorage.key(e);r&&r.startsWith(n)&&localStorage.removeItem(r)}}catch{}}function h(t){return typeof t=="object"&&t!==null&&t.constructor===Object}function c(t){return Array.isArray(t)?`[${t.map(c).join(",")}]`:h(t)?`{${Object.keys(t).sort().map(e=>`${JSON.stringify(e)}:${c(t[e])}`).join(",")}}`:JSON.stringify(t)}function I(t,n){const e=n==null?void 0:n.params;return`GET:${t}?params=${c(e??null)}`}async function p(t,n,e){const r=(e==null?void 0:e.ttlMs)??12e4,o=(e==null?void 0:e.key)??I(t,n),s=S(o);if(s!==null)return s;const l=await y.get(t,n);return g(o,l.data,r),l.data}function b(t){$(t)}export{p as c,b as i};
